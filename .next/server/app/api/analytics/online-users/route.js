"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/analytics/online-users/route";
exports.ids = ["app/api/analytics/online-users/route"];
exports.modules = {

/***/ "next/dist/compiled/next-server/app-page.runtime.dev.js":
/*!*************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-page.runtime.dev.js" ***!
  \*************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-page.runtime.dev.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fanalytics%2Fonline-users%2Froute&page=%2Fapi%2Fanalytics%2Fonline-users%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fanalytics%2Fonline-users%2Froute.ts&appDir=%2FUsers%2FZhuanz%2FDesktop%2FCache%2Fnext-english-app-sm2%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2FZhuanz%2FDesktop%2FCache%2Fnext-english-app-sm2&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!":
/*!************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fanalytics%2Fonline-users%2Froute&page=%2Fapi%2Fanalytics%2Fonline-users%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fanalytics%2Fonline-users%2Froute.ts&appDir=%2FUsers%2FZhuanz%2FDesktop%2FCache%2Fnext-english-app-sm2%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2FZhuanz%2FDesktop%2FCache%2Fnext-english-app-sm2&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D! ***!
  \************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   originalPathname: () => (/* binding */ originalPathname),\n/* harmony export */   patchFetch: () => (/* binding */ patchFetch),\n/* harmony export */   requestAsyncStorage: () => (/* binding */ requestAsyncStorage),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   staticGenerationAsyncStorage: () => (/* binding */ staticGenerationAsyncStorage)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/app-route/module.compiled */ \"(rsc)/./node_modules/next/dist/server/future/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(rsc)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/lib/patch-fetch */ \"(rsc)/./node_modules/next/dist/server/lib/patch-fetch.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _Users_Zhuanz_Desktop_Cache_next_english_app_sm2_app_api_analytics_online_users_route_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./app/api/analytics/online-users/route.ts */ \"(rsc)/./app/api/analytics/online-users/route.ts\");\n\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"\"\nconst routeModule = new next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/analytics/online-users/route\",\n        pathname: \"/api/analytics/online-users\",\n        filename: \"route\",\n        bundlePath: \"app/api/analytics/online-users/route\"\n    },\n    resolvedPagePath: \"/Users/Zhuanz/Desktop/Cache/next-english-app-sm2/app/api/analytics/online-users/route.ts\",\n    nextConfigOutput,\n    userland: _Users_Zhuanz_Desktop_Cache_next_english_app_sm2_app_api_analytics_online_users_route_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { requestAsyncStorage, staticGenerationAsyncStorage, serverHooks } = routeModule;\nconst originalPathname = \"/api/analytics/online-users/route\";\nfunction patchFetch() {\n    return (0,next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__.patchFetch)({\n        serverHooks,\n        staticGenerationAsyncStorage\n    });\n}\n\n\n//# sourceMappingURL=app-route.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIuanM/bmFtZT1hcHAlMkZhcGklMkZhbmFseXRpY3MlMkZvbmxpbmUtdXNlcnMlMkZyb3V0ZSZwYWdlPSUyRmFwaSUyRmFuYWx5dGljcyUyRm9ubGluZS11c2VycyUyRnJvdXRlJmFwcFBhdGhzPSZwYWdlUGF0aD1wcml2YXRlLW5leHQtYXBwLWRpciUyRmFwaSUyRmFuYWx5dGljcyUyRm9ubGluZS11c2VycyUyRnJvdXRlLnRzJmFwcERpcj0lMkZVc2VycyUyRlpodWFueiUyRkRlc2t0b3AlMkZDYWNoZSUyRm5leHQtZW5nbGlzaC1hcHAtc20yJTJGYXBwJnBhZ2VFeHRlbnNpb25zPXRzeCZwYWdlRXh0ZW5zaW9ucz10cyZwYWdlRXh0ZW5zaW9ucz1qc3gmcGFnZUV4dGVuc2lvbnM9anMmcm9vdERpcj0lMkZVc2VycyUyRlpodWFueiUyRkRlc2t0b3AlMkZDYWNoZSUyRm5leHQtZW5nbGlzaC1hcHAtc20yJmlzRGV2PXRydWUmdHNjb25maWdQYXRoPXRzY29uZmlnLmpzb24mYmFzZVBhdGg9JmFzc2V0UHJlZml4PSZuZXh0Q29uZmlnT3V0cHV0PSZwcmVmZXJyZWRSZWdpb249Jm1pZGRsZXdhcmVDb25maWc9ZTMwJTNEISIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7QUFBc0c7QUFDdkM7QUFDYztBQUN3QztBQUNySDtBQUNBO0FBQ0E7QUFDQSx3QkFBd0IsZ0hBQW1CO0FBQzNDO0FBQ0EsY0FBYyx5RUFBUztBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsWUFBWTtBQUNaLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQSxRQUFRLGlFQUFpRTtBQUN6RTtBQUNBO0FBQ0EsV0FBVyw0RUFBVztBQUN0QjtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ3VIOztBQUV2SCIsInNvdXJjZXMiOlsid2VicGFjazovL25leHQtZW5nbGlzaC1hcHAtc20yLz80ZjQwIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEFwcFJvdXRlUm91dGVNb2R1bGUgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9mdXR1cmUvcm91dGUtbW9kdWxlcy9hcHAtcm91dGUvbW9kdWxlLmNvbXBpbGVkXCI7XG5pbXBvcnQgeyBSb3V0ZUtpbmQgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9mdXR1cmUvcm91dGUta2luZFwiO1xuaW1wb3J0IHsgcGF0Y2hGZXRjaCBhcyBfcGF0Y2hGZXRjaCB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2xpYi9wYXRjaC1mZXRjaFwiO1xuaW1wb3J0ICogYXMgdXNlcmxhbmQgZnJvbSBcIi9Vc2Vycy9aaHVhbnovRGVza3RvcC9DYWNoZS9uZXh0LWVuZ2xpc2gtYXBwLXNtMi9hcHAvYXBpL2FuYWx5dGljcy9vbmxpbmUtdXNlcnMvcm91dGUudHNcIjtcbi8vIFdlIGluamVjdCB0aGUgbmV4dENvbmZpZ091dHB1dCBoZXJlIHNvIHRoYXQgd2UgY2FuIHVzZSB0aGVtIGluIHRoZSByb3V0ZVxuLy8gbW9kdWxlLlxuY29uc3QgbmV4dENvbmZpZ091dHB1dCA9IFwiXCJcbmNvbnN0IHJvdXRlTW9kdWxlID0gbmV3IEFwcFJvdXRlUm91dGVNb2R1bGUoe1xuICAgIGRlZmluaXRpb246IHtcbiAgICAgICAga2luZDogUm91dGVLaW5kLkFQUF9ST1VURSxcbiAgICAgICAgcGFnZTogXCIvYXBpL2FuYWx5dGljcy9vbmxpbmUtdXNlcnMvcm91dGVcIixcbiAgICAgICAgcGF0aG5hbWU6IFwiL2FwaS9hbmFseXRpY3Mvb25saW5lLXVzZXJzXCIsXG4gICAgICAgIGZpbGVuYW1lOiBcInJvdXRlXCIsXG4gICAgICAgIGJ1bmRsZVBhdGg6IFwiYXBwL2FwaS9hbmFseXRpY3Mvb25saW5lLXVzZXJzL3JvdXRlXCJcbiAgICB9LFxuICAgIHJlc29sdmVkUGFnZVBhdGg6IFwiL1VzZXJzL1podWFuei9EZXNrdG9wL0NhY2hlL25leHQtZW5nbGlzaC1hcHAtc20yL2FwcC9hcGkvYW5hbHl0aWNzL29ubGluZS11c2Vycy9yb3V0ZS50c1wiLFxuICAgIG5leHRDb25maWdPdXRwdXQsXG4gICAgdXNlcmxhbmRcbn0pO1xuLy8gUHVsbCBvdXQgdGhlIGV4cG9ydHMgdGhhdCB3ZSBuZWVkIHRvIGV4cG9zZSBmcm9tIHRoZSBtb2R1bGUuIFRoaXMgc2hvdWxkXG4vLyBiZSBlbGltaW5hdGVkIHdoZW4gd2UndmUgbW92ZWQgdGhlIG90aGVyIHJvdXRlcyB0byB0aGUgbmV3IGZvcm1hdC4gVGhlc2Vcbi8vIGFyZSB1c2VkIHRvIGhvb2sgaW50byB0aGUgcm91dGUuXG5jb25zdCB7IHJlcXVlc3RBc3luY1N0b3JhZ2UsIHN0YXRpY0dlbmVyYXRpb25Bc3luY1N0b3JhZ2UsIHNlcnZlckhvb2tzIH0gPSByb3V0ZU1vZHVsZTtcbmNvbnN0IG9yaWdpbmFsUGF0aG5hbWUgPSBcIi9hcGkvYW5hbHl0aWNzL29ubGluZS11c2Vycy9yb3V0ZVwiO1xuZnVuY3Rpb24gcGF0Y2hGZXRjaCgpIHtcbiAgICByZXR1cm4gX3BhdGNoRmV0Y2goe1xuICAgICAgICBzZXJ2ZXJIb29rcyxcbiAgICAgICAgc3RhdGljR2VuZXJhdGlvbkFzeW5jU3RvcmFnZVxuICAgIH0pO1xufVxuZXhwb3J0IHsgcm91dGVNb2R1bGUsIHJlcXVlc3RBc3luY1N0b3JhZ2UsIHN0YXRpY0dlbmVyYXRpb25Bc3luY1N0b3JhZ2UsIHNlcnZlckhvb2tzLCBvcmlnaW5hbFBhdGhuYW1lLCBwYXRjaEZldGNoLCAgfTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9YXBwLXJvdXRlLmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fanalytics%2Fonline-users%2Froute&page=%2Fapi%2Fanalytics%2Fonline-users%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fanalytics%2Fonline-users%2Froute.ts&appDir=%2FUsers%2FZhuanz%2FDesktop%2FCache%2Fnext-english-app-sm2%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2FZhuanz%2FDesktop%2FCache%2Fnext-english-app-sm2&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!\n");

/***/ }),

/***/ "(rsc)/./app/api/analytics/online-users/route.ts":
/*!*************************************************!*\
  !*** ./app/api/analytics/online-users/route.ts ***!
  \*************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   GET: () => (/* binding */ GET)\n/* harmony export */ });\n/* harmony import */ var next_server__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/server */ \"(rsc)/./node_modules/next/dist/api/server.js\");\n// app/api/analytics/online-users/route.ts - 在线用户统计查询 API\n\nasync function GET(request) {\n    try {\n        // 清理非活跃用户\n        cleanupInactiveUsers();\n        // 获取查询参数\n        const searchParams = request.nextUrl.searchParams;\n        const format = searchParams.get(\"format\") || \"simple\" // simple | detailed\n        ;\n        const timeRange = searchParams.get(\"timeRange\") || \"1h\" // 1h | 6h | 24h | 7d\n        ;\n        // 基础在线用户统计\n        const onlineUsers = global.onlineUsers || new Map();\n        const currentOnlineCount = onlineUsers.size;\n        if (format === \"simple\") {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                success: true,\n                onlineUsers: currentOnlineCount,\n                timestamp: new Date().toISOString()\n            });\n        }\n        // 详细统计数据\n        const detailedStats = await generateDetailedStats(timeRange);\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            success: true,\n            current: {\n                onlineUsers: currentOnlineCount,\n                timestamp: new Date().toISOString()\n            },\n            historical: detailedStats,\n            breakdown: await generateUserBreakdown()\n        });\n    } catch (error) {\n        console.error(\"在线用户统计 API 错误:\", error);\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            message: \"获取在线用户统计失败\"\n        }, {\n            status: 500\n        });\n    }\n}\n// 清理非活跃用户\nfunction cleanupInactiveUsers() {\n    const now = new Date();\n    const inactiveThreshold = 5 * 60 * 1000 // 5分钟\n    ;\n    if (!global.onlineUsers) {\n        global.onlineUsers = new Map();\n        return;\n    }\n    for (const [userId, userData] of global.onlineUsers.entries()){\n        const lastActivity = new Date(userData.lastActivity);\n        if (now.getTime() - lastActivity.getTime() > inactiveThreshold) {\n            global.onlineUsers.delete(userId);\n        }\n    }\n}\n// 生成详细统计数据\nasync function generateDetailedStats(timeRange) {\n    try {\n        const now = new Date();\n        let startTime;\n        let interval// 分钟\n        ;\n        // 根据时间范围设置开始时间和采样间隔\n        switch(timeRange){\n            case \"1h\":\n                startTime = new Date(now.getTime() - 60 * 60 * 1000);\n                interval = 5 // 5分钟间隔\n                ;\n                break;\n            case \"6h\":\n                startTime = new Date(now.getTime() - 6 * 60 * 60 * 1000);\n                interval = 30 // 30分钟间隔\n                ;\n                break;\n            case \"24h\":\n                startTime = new Date(now.getTime() - 24 * 60 * 60 * 1000);\n                interval = 60 // 1小时间隔\n                ;\n                break;\n            case \"7d\":\n                startTime = new Date(now.getTime() - 7 * 24 * 60 * 60 * 1000);\n                interval = 60 * 24 // 1天间隔\n                ;\n                break;\n            default:\n                startTime = new Date(now.getTime() - 60 * 60 * 1000);\n                interval = 5;\n        }\n        const analyticsData = global.analyticsData || [];\n        const timePoints = [];\n        // 生成时间点数据\n        let currentTime = new Date(startTime);\n        while(currentTime <= now){\n            const nextTime = new Date(currentTime.getTime() + interval * 60 * 1000);\n            // 找到这个时间段内的数据\n            const periodData = analyticsData.filter((record)=>{\n                const recordTime = new Date(record.timestamp);\n                return recordTime >= currentTime && recordTime < nextTime && record.type === \"heartbeat\";\n            });\n            // 计算平均在线用户数\n            const avgCount = periodData.length > 0 ? Math.round(periodData.reduce((sum, record)=>sum + (record.onlineCount || 0), 0) / periodData.length) : 0;\n            timePoints.push({\n                time: currentTime.toISOString(),\n                count: avgCount\n            });\n            currentTime = nextTime;\n        }\n        // 计算统计指标\n        const counts = timePoints.map((point)=>point.count);\n        const stats = {\n            timePoints,\n            summary: {\n                current: global.onlineUsers?.size || 0,\n                peak: Math.max(...counts, 0),\n                average: counts.length > 0 ? Math.round(counts.reduce((a, b)=>a + b, 0) / counts.length) : 0,\n                minimum: Math.min(...counts.filter((c)=>c > 0), 0)\n            }\n        };\n        return stats;\n    } catch (error) {\n        console.error(\"生成详细统计失败:\", error);\n        return {\n            timePoints: [],\n            summary: {\n                current: 0,\n                peak: 0,\n                average: 0,\n                minimum: 0\n            }\n        };\n    }\n}\n// 生成用户类型分析\nasync function generateUserBreakdown() {\n    try {\n        const onlineUsers = global.onlineUsers || new Map();\n        const breakdown = {\n            total: onlineUsers.size,\n            authenticated: 0,\n            anonymous: 0,\n            newSessions: 0,\n            platforms: {\n                desktop: 0,\n                mobile: 0,\n                tablet: 0,\n                unknown: 0\n            }\n        };\n        const now = new Date();\n        const newSessionThreshold = 30 * 60 * 1000 // 30分钟\n        ;\n        for (const [userId, userData] of onlineUsers.entries()){\n            // 区分认证用户和匿名用户\n            if (userId.startsWith(\"session_\")) {\n                breakdown.anonymous++;\n            } else {\n                breakdown.authenticated++;\n            }\n            // 检查新会话\n            const loginTime = new Date(userData.loginTime);\n            if (now.getTime() - loginTime.getTime() < newSessionThreshold) {\n                breakdown.newSessions++;\n            }\n            // 平台分析\n            const userAgent = userData.userAgent?.toLowerCase() || \"\";\n            if (userAgent.includes(\"mobile\") || userAgent.includes(\"android\") || userAgent.includes(\"iphone\")) {\n                breakdown.platforms.mobile++;\n            } else if (userAgent.includes(\"tablet\") || userAgent.includes(\"ipad\")) {\n                breakdown.platforms.tablet++;\n            } else if (userAgent.includes(\"chrome\") || userAgent.includes(\"firefox\") || userAgent.includes(\"safari\")) {\n                breakdown.platforms.desktop++;\n            } else {\n                breakdown.platforms.unknown++;\n            }\n        }\n        return breakdown;\n    } catch (error) {\n        console.error(\"生成用户分析失败:\", error);\n        return {\n            total: 0,\n            authenticated: 0,\n            anonymous: 0,\n            newSessions: 0,\n            platforms: {\n                desktop: 0,\n                mobile: 0,\n                tablet: 0,\n                unknown: 0\n            }\n        };\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9hcHAvYXBpL2FuYWx5dGljcy9vbmxpbmUtdXNlcnMvcm91dGUudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7QUFBQSx5REFBeUQ7QUFDRjtBQUVoRCxlQUFlQyxJQUFJQyxPQUFvQjtJQUM1QyxJQUFJO1FBQ0YsVUFBVTtRQUNWQztRQUVBLFNBQVM7UUFDVCxNQUFNQyxlQUFlRixRQUFRRyxPQUFPLENBQUNELFlBQVk7UUFDakQsTUFBTUUsU0FBU0YsYUFBYUcsR0FBRyxDQUFDLGFBQWEsU0FBUyxvQkFBb0I7O1FBQzFFLE1BQU1DLFlBQVlKLGFBQWFHLEdBQUcsQ0FBQyxnQkFBZ0IsS0FBSyxxQkFBcUI7O1FBRTdFLFdBQVc7UUFDWCxNQUFNRSxjQUFjQyxPQUFPRCxXQUFXLElBQUksSUFBSUU7UUFDOUMsTUFBTUMscUJBQXFCSCxZQUFZSSxJQUFJO1FBRTNDLElBQUlQLFdBQVcsVUFBVTtZQUN2QixPQUFPTixxREFBWUEsQ0FBQ2MsSUFBSSxDQUFDO2dCQUN2QkMsU0FBUztnQkFDVE4sYUFBYUc7Z0JBQ2JJLFdBQVcsSUFBSUMsT0FBT0MsV0FBVztZQUNuQztRQUNGO1FBRUEsU0FBUztRQUNULE1BQU1DLGdCQUFnQixNQUFNQyxzQkFBc0JaO1FBRWxELE9BQU9SLHFEQUFZQSxDQUFDYyxJQUFJLENBQUM7WUFDdkJDLFNBQVM7WUFDVE0sU0FBUztnQkFDUFosYUFBYUc7Z0JBQ2JJLFdBQVcsSUFBSUMsT0FBT0MsV0FBVztZQUNuQztZQUNBSSxZQUFZSDtZQUNaSSxXQUFXLE1BQU1DO1FBQ25CO0lBRUYsRUFBRSxPQUFPQyxPQUFPO1FBQ2RDLFFBQVFELEtBQUssQ0FBQyxrQkFBa0JBO1FBQ2hDLE9BQU96QixxREFBWUEsQ0FBQ2MsSUFBSSxDQUN0QjtZQUFFYSxTQUFTO1FBQWEsR0FDeEI7WUFBRUMsUUFBUTtRQUFJO0lBRWxCO0FBQ0Y7QUFFQSxVQUFVO0FBQ1YsU0FBU3pCO0lBQ1AsTUFBTTBCLE1BQU0sSUFBSVo7SUFDaEIsTUFBTWEsb0JBQW9CLElB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QUFDLGFBQWFGLFVBQVVFLFFBQVEsQ0FBQyxjQUFjRixVQUFVRSxRQUFRLENBQUMsV0FBVztnQkFDakc5RCxVQUFVb0QsU0FBUyxDQUFDRSxNQUFNO1lBQzVCLE9BQU8sSUFBSU0sVUFBVUUsUUFBUSxDQUFDLGFBQWFGLFVBQVVFLFFBQVEsQ0FBQyxTQUFTO2dCQUNyRTlELFVBQVVvRCxTQUFTLENBQUNHLE1BQU07WUFDNUIsT0FBTyxJQUFJSyxVQUFVRSxRQUFRLENBQUMsYUFBYUYsVUFBVUUsUUFBUSxDQUFDLGNBQWNGLFVBQVVFLFFBQVEsQ0FBQyxXQUFXO2dCQUN4RzlELFVBQVVvRCxTQUFTLENBQUNDLE9BQU87WUFDN0IsT0FBTztnQkFDTHJELFVBQVVvRCxTQUFTLENBQUNJLE9BQU87WUFDN0I7UUFDRjtRQUVBLE9BQU94RDtJQUVULEVBQUUsT0FBT0UsT0FBTztRQUNkQyxRQUFRRCxLQUFLLENBQUMsYUFBYUE7UUFDM0IsT0FBTztZQUNMOEMsT0FBTztZQUNQQyxlQUFlO1lBQ2ZDLFdBQVc7WUFDWEMsYUFBYTtZQUNiQyxXQUFXO2dCQUFFQyxTQUFTO2dCQUFHQyxRQUFRO2dCQUFHQyxRQUFRO2dCQUFHQyxTQUFTO1lBQUU7UUFDNUQ7SUFDRjtBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vbmV4dC1lbmdsaXNoLWFwcC1zbTIvLi9hcHAvYXBpL2FuYWx5dGljcy9vbmxpbmUtdXNlcnMvcm91dGUudHM/NTllZSJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBhcHAvYXBpL2FuYWx5dGljcy9vbmxpbmUtdXNlcnMvcm91dGUudHMgLSDlnKjnur/nlKjmiLfnu5/orqHmn6Xor6IgQVBJXG5pbXBvcnQgeyBOZXh0UmVxdWVzdCwgTmV4dFJlc3BvbnNlIH0gZnJvbSAnbmV4dC9zZXJ2ZXInXG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBHRVQocmVxdWVzdDogTmV4dFJlcXVlc3QpIHtcbiAgdHJ5IHtcbiAgICAvLyDmuIXnkIbpnZ7mtLvot4PnlKjmiLdcbiAgICBjbGVhbnVwSW5hY3RpdmVVc2VycygpXG4gICAgXG4gICAgLy8g6I635Y+W5p+l6K+i5Y+C5pWwXG4gICAgY29uc3Qgc2VhcmNoUGFyYW1zID0gcmVxdWVzdC5uZXh0VXJsLnNlYXJjaFBhcmFtc1xuICAgIGNvbnN0IGZvcm1hdCA9IHNlYXJjaFBhcmFtcy5nZXQoJ2Zvcm1hdCcpIHx8ICdzaW1wbGUnIC8vIHNpbXBsZSB8IGRldGFpbGVkXG4gICAgY29uc3QgdGltZVJhbmdlID0gc2VhcmNoUGFyYW1zLmdldCgndGltZVJhbmdlJykgfHwgJzFoJyAvLyAxaCB8IDZoIHwgMjRoIHwgN2RcblxuICAgIC8vIOWfuuehgOWcqOe6v+eUqOaIt+e7n+iuoVxuICAgIGNvbnN0IG9ubGluZVVzZXJzID0gZ2xvYmFsLm9ubGluZVVzZXJzIHx8IG5ldyBNYXAoKVxuICAgIGNvbnN0IGN1cnJlbnRPbmxpbmVDb3VudCA9IG9ubGluZVVzZXJzLnNpemVcblxuICAgIGlmIChmb3JtYXQgPT09ICdzaW1wbGUnKSB7XG4gICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oe1xuICAgICAgICBzdWNjZXNzOiB0cnVlLFxuICAgICAgICBvbmxpbmVVc2VyczogY3VycmVudE9ubGluZUNvdW50LFxuICAgICAgICB0aW1lc3RhbXA6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKVxuICAgICAgfSlcbiAgICB9XG5cbiAgICAvLyDor6bnu4bnu5/orqHmlbDmja5cbiAgICBjb25zdCBkZXRhaWxlZFN0YXRzID0gYXdhaXQgZ2VuZXJhdGVEZXRhaWxlZFN0YXRzKHRpbWVSYW5nZSlcbiAgICBcbiAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oe1xuICAgICAgc3VjY2VzczogdHJ1ZSxcbiAgICAgIGN1cnJlbnQ6IHtcbiAgICAgICAgb25saW5lVXNlcnM6IGN1cnJlbnRPbmxpbmVDb3VudCxcbiAgICAgICAgdGltZXN0YW1wOiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKClcbiAgICAgIH0sXG4gICAgICBoaXN0b3JpY2FsOiBkZXRhaWxlZFN0YXRzLFxuICAgICAgYnJlYWtkb3duOiBhd2FpdCBnZW5lcmF0ZVVzZXJCcmVha2Rvd24oKVxuICAgIH0pXG5cbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKCflnKjnur/nlKjmiLfnu5/orqEgQVBJIOmUmeivrzonLCBlcnJvcilcbiAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oXG4gICAgICB7IG1lc3NhZ2U6ICfojrflj5blnKjnur/nlKjmiLfnu5/orqHlpLHotKUnIH0sXG4gICAgICB7IHN0YXR1czogNTAwIH1cbiAgICApXG4gIH1cbn1cblxuLy8g5riF55CG6Z2e5rS76LeD55So5oi3XG5mdW5jdGlvbiBjbGVhbnVwSW5hY3RpdmVVc2VycygpIHtcbiAgY29uc3Qgbm93ID0gbmV3IERhdGUoKVxuICBjb25zdCBpbmFjdGl2ZVRocmVzaG9sZCA9IDUgKiA2MCAqIDEwMDAgLy8gNeWIhumSn1xuXG4gIGlmICghZ2xvYmFsLm9ubGluZVVzZXJzKSB7XG4gICAgZ2xvYmFsLm9ubGluZVVzZXJzID0gbmV3IE1hcCgpXG4gICAgcmV0dXJuXG4gIH1cblxuICBmb3IgKGNvbnN0IFt1c2VySWQsIHVzZXJEYXRhXSBvZiBnbG9iYWwub25saW5lVXNlcnMuZW50cmllcygpKSB7XG4gICAgY29uc3QgbGFzdEFjdGl2aXR5ID0gbmV3IERhdGUodXNlckRhdGEubGFzdEFjdGl2aXR5KVxuICAgIFxuICAgIGlmIChub3cuZ2V0VGltZSgpIC0gbGFzdEFjdGl2aXR5LmdldFRpbWUoKSA+IGluYWN0aXZlVGhyZXNob2xkKSB7XG4gICAgICBnbG9iYWwub25saW5lVXNlcnMuZGVsZXRlKHVzZXJJZClcbiAgICB9XG4gIH1cbn1cblxuLy8g55Sf5oiQ6K+m57uG57uf6K6h5pWw5o2uXG5hc3luYyBmdW5jdGlvbiBnZW5lcmF0ZURldGFpbGVkU3RhdHModGltZVJhbmdlOiBzdHJpbmcpIHtcbiAgdHJ5IHtcbiAgICBjb25zdCBub3cgPSBuZXcgRGF0ZSgpXG4gICAgbGV0IHN0YXJ0VGltZTogRGF0ZVxuICAgIGxldCBpbnRlcnZhbDogbnVtYmVyIC8vIOWIhumSn1xuICAgIFxuICAgIC8vIOagueaNruaXtumXtOiMg+WbtOiuvue9ruW8gOWni+aXtumXtOWSjOmHh+agt+mXtOmalFxuICAgIHN3aXRjaCAodGltZVJhbmdlKSB7XG4gICAgICBjYXNlICcxaCc6XG4gICAgICAgIHN0YXJ0VGltZSA9IG5ldyBEYXRlKG5vdy5nZXRUaW1lKCkgLSA2MCAqIDYwICogMTAwMClcbiAgICAgICAgaW50ZXJ2YWwgPSA1IC8vIDXliIbpkp/pl7TpmpRcbiAgICAgICAgYnJlYWtcbiAgICAgIGNhc2UgJzZoJzpcbiAgICAgICAgc3RhcnRUaW1lID0gbmV3IERhdGUobm93LmdldFRpbWUoKSAtIDYgKiA2MCAqIDYwICogMTAwMClcbiAgICAgICAgaW50ZXJ2YWwgPSAzMCAvLyAzMOWIhumSn+mXtOmalFxuICAgICAgICBicmVha1xuICAgICAgY2FzZSAnMjRoJzpcbiAgICAgICAgc3RhcnRUaW1lID0gbmV3IERhdGUobm93LmdldFRpbWUoKSAtIDI0ICogNjAgKiA2MCAqIDEwMDApXG4gICAgICAgIGludGVydmFsID0gNjAgLy8gMeWwj+aXtumXtOmalFxuICAgICAgICBicmVha1xuICAgICAgY2FzZSAnN2QnOlxuICAgICAgICBzdGFydFRpbWUgPSBuZXcgRGF0ZShub3cuZ2V0VGltZSgpIC0gNyAqIDI0ICogNjAgKiA2MCAqIDEwMDApXG4gICAgICAgIGludGVydmFsID0gNjAgKiAyNCAvLyAx5aSp6Ze06ZqUXG4gICAgICAgIGJyZWFrXG4gICAgICBkZWZhdWx0OlxuICAgICAgICBzdGFydFRpbWUgPSBuZXcgRGF0ZShub3cuZ2V0VGltZSgpIC0gNjAgKiA2MCAqIDEwMDApXG4gICAgICAgIGludGVydmFsID0gNVxuICAgIH1cblxuICAgIGNvbnN0IGFuYWx5dGljc0RhdGEgPSBnbG9iYWwuYW5hbHl0aWNzRGF0YSB8fCBbXVxuICAgIGNvbnN0IHRpbWVQb2ludHM6IEFycmF5PHt0aW1lOiBzdHJpbmcsIGNvdW50OiBudW1iZXJ9PiA9IFtdXG4gICAgXG4gICAgLy8g55Sf5oiQ5pe26Ze054K55pWw5o2uXG4gICAgbGV0IGN1cnJlbnRUaW1lID0gbmV3IERhdGUoc3RhcnRUaW1lKVxuICAgIHdoaWxlIChjdXJyZW50VGltZSA8PSBub3cpIHtcbiAgICAgIGNvbnN0IG5leHRUaW1lID0gbmV3IERhdGUoY3VycmVudFRpbWUuZ2V0VGltZSgpICsgaW50ZXJ2YWwgKiA2MCAqIDEwMDApXG4gICAgICBcbiAgICAgIC8vIOaJvuWIsOi/meS4quaXtumXtOauteWGheeahOaVsOaNrlxuICAgICAgY29uc3QgcGVyaW9kRGF0YSA9IGFuYWx5dGljc0RhdGEuZmlsdGVyKChyZWNvcmQ6IGFueSkgPT4ge1xuICAgICAgICBjb25zdCByZWNvcmRUaW1lID0gbmV3IERhdGUocmVjb3JkLnRpbWVzdGFtcClcbiAgICAgICAgcmV0dXJuIHJlY29yZFRpbWUgPj0gY3VycmVudFRpbWUgJiYgcmVjb3JkVGltZSA8IG5leHRUaW1lICYmIHJlY29yZC50eXBlID09PSAnaGVhcnRiZWF0J1xuICAgICAgfSlcbiAgICAgIFxuICAgICAgLy8g6K6h566X5bmz5Z2H5Zyo57q/55So5oi35pWwXG4gICAgICBjb25zdCBhdmdDb3VudCA9IHBlcmlvZERhdGEubGVuZ3RoID4gMFxuICAgICAgICA/IE1hdGgucm91bmQocGVyaW9kRGF0YS5yZWR1Y2UoKHN1bTogbnVtYmVyLCByZWNvcmQ6IGFueSkgPT4gc3VtICsgKHJlY29yZC5vbmxpbmVDb3VudCB8fCAwKSwgMCkgLyBwZXJpb2REYXRhLmxlbmd0aClcbiAgICAgICAgOiAwXG4gICAgICBcbiAgICAgIHRpbWVQb2ludHMucHVzaCh7XG4gICAgICAgIHRpbWU6IGN1cnJlbnRUaW1lLnRvSVNPU3RyaW5nKCksXG4gICAgICAgIGNvdW50OiBhdmdDb3VudFxuICAgICAgfSlcbiAgICAgIFxuICAgICAgY3VycmVudFRpbWUgPSBuZXh0VGltZVxuICAgIH1cblxuICAgIC8vIOiuoeeul+e7n+iuoeaMh+agh1xuICAgIGNvbnN0IGNvdW50cyA9IHRpbWVQb2ludHMubWFwKHBvaW50ID0+IHBvaW50LmNvdW50KVxuICAgIGNvbnN0IHN0YXRzID0ge1xuICAgICAgdGltZVBvaW50cyxcbiAgICAgIHN1bW1hcnk6IHtcbiAgICAgICAgY3VycmVudDogZ2xvYmFsLm9ubGluZVVzZXJzPy5zaXplIHx8IDAsXG4gICAgICAgIHBlYWs6IE1hdGgubWF4KC4uLmNvdW50cywgMCksXG4gICAgICAgIGF2ZXJhZ2U6IGNvdW50cy5sZW5ndGggPiAwID8gTWF0aC5yb3VuZChjb3VudHMucmVkdWNlKChhLCBiKSA9PiBhICsgYiwgMCkgLyBjb3VudHMubGVuZ3RoKSA6IDAsXG4gICAgICAgIG1pbmltdW06IE1hdGgubWluKC4uLmNvdW50cy5maWx0ZXIoYyA9PiBjID4gMCksIDApXG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIHN0YXRzXG5cbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKCfnlJ/miJDor6bnu4bnu5/orqHlpLHotKU6JywgZXJyb3IpXG4gICAgcmV0dXJuIHtcbiAgICAgIHRpbWVQb2ludHM6IFtdLFxuICAgICAgc3VtbWFyeTogeyBjdXJyZW50OiAwLCBwZWFrOiAwLCBhdmVyYWdlOiAwLCBtaW5pbXVtOiAwIH1cbiAgICB9XG4gIH1cbn1cblxuLy8g55Sf5oiQ55So5oi357G75Z6L5YiG5p6QXG5hc3luYyBmdW5jdGlvbiBnZW5lcmF0ZVVzZXJCcmVha2Rvd24oKSB7XG4gIHRyeSB7XG4gICAgY29uc3Qgb25saW5lVXNlcnMgPSBnbG9iYWwub25saW5lVXNlcnMgfHwgbmV3IE1hcCgpXG4gICAgY29uc3QgYnJlYWtkb3duID0ge1xuICAgICAgdG90YWw6IG9ubGluZVVzZXJzLnNpemUsXG4gICAgICBhdXRoZW50aWNhdGVkOiAwLFxuICAgICAgYW5vbnltb3VzOiAwLFxuICAgICAgbmV3U2Vzc2lvbnM6IDAsIC8vIOacgOi/kTMw5YiG6ZKf5YaF55qE5paw5Lya6K+dXG4gICAgICBwbGF0Zm9ybXM6IHtcbiAgICAgICAgZGVza3RvcDogMCxcbiAgICAgICAgbW9iaWxlOiAwLFxuICAgICAgICB0YWJsZXQ6IDAsXG4gICAgICAgIHVua25vd246IDBcbiAgICAgIH1cbiAgICB9XG5cbiAgICBjb25zdCBub3cgPSBuZXcgRGF0ZSgpXG4gICAgY29uc3QgbmV3U2Vzc2lvblRocmVzaG9sZCA9IDMwICogNjAgKiAxMDAwIC8vIDMw5YiG6ZKfXG5cbiAgICBmb3IgKGNvbnN0IFt1c2VySWQsIHVzZXJEYXRhXSBvZiBvbmxpbmVVc2Vycy5lbnRyaWVzKCkpIHtcbiAgICAgIC8vIOWMuuWIhuiupOivgeeUqOaIt+WSjOWMv+WQjeeUqOaIt1xuICAgICAgaWYgKHVzZXJJZC5zdGFydHNXaXRoKCdzZXNzaW9uXycpKSB7XG4gICAgICAgIGJyZWFrZG93bi5hbm9ueW1vdXMrK1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgYnJlYWtkb3duLmF1dGhlbnRpY2F0ZWQrK1xuICAgICAgfVxuXG4gICAgICAvLyDmo4Dmn6XmlrDkvJror51cbiAgICAgIGNvbnN0IGxvZ2luVGltZSA9IG5ldyBEYXRlKHVzZXJEYXRhLmxvZ2luVGltZSlcbiAgICAgIGlmIChub3cuZ2V0VGltZSgpIC0gbG9naW5UaW1lLmdldFRpbWUoKSA8IG5ld1Nlc3Npb25UaHJlc2hvbGQpIHtcbiAgICAgICAgYnJlYWtkb3duLm5ld1Nlc3Npb25zKytcbiAgICAgIH1cblxuICAgICAgLy8g5bmz5Y+w5YiG5p6QXG4gICAgICBjb25zdCB1c2VyQWdlbnQgPSB1c2VyRGF0YS51c2VyQWdlbnQ/LnRvTG93ZXJDYXNlKCkgfHwgJydcbiAgICAgIGlmICh1c2VyQWdlbnQuaW5jbHVkZXMoJ21vYmlsZScpIHx8IHVzZXJBZ2VudC5pbmNsdWRlcygnYW5kcm9pZCcpIHx8IHVzZXJBZ2VudC5pbmNsdWRlcygnaXBob25lJykpIHtcbiAgICAgICAgYnJlYWtkb3duLnBsYXRmb3Jtcy5tb2JpbGUrK1xuICAgICAgfSBlbHNlIGlmICh1c2VyQWdlbnQuaW5jbHVkZXMoJ3RhYmxldCcpIHx8IHVzZXJBZ2VudC5pbmNsdWRlcygnaXBhZCcpKSB7XG4gICAgICAgIGJyZWFrZG93bi5wbGF0Zm9ybXMudGFibGV0KytcbiAgICAgIH0gZWxzZSBpZiAodXNlckFnZW50LmluY2x1ZGVzKCdjaHJvbWUnKSB8fCB1c2VyQWdlbnQuaW5jbHVkZXMoJ2ZpcmVmb3gnKSB8fCB1c2VyQWdlbnQuaW5jbHVkZXMoJ3NhZmFyaScpKSB7XG4gICAgICAgIGJyZWFrZG93bi5wbGF0Zm9ybXMuZGVza3RvcCsrXG4gICAgICB9IGVsc2Uge1xuICAgICAgICBicmVha2Rvd24ucGxhdGZvcm1zLnVua25vd24rK1xuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBicmVha2Rvd25cblxuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoJ+eUn+aIkOeUqOaIt+WIhuaekOWksei0pTonLCBlcnJvcilcbiAgICByZXR1cm4ge1xuICAgICAgdG90YWw6IDAsXG4gICAgICBhdXRoZW50aWNhdGVkOiAwLFxuICAgICAgYW5vbnltb3VzOiAwLFxuICAgICAgbmV3U2Vzc2lvbnM6IDAsXG4gICAgICBwbGF0Zm9ybXM6IHsgZGVza3RvcDogMCwgbW9iaWxlOiAwLCB0YWJsZXQ6IDAsIHVua25vd246IDAgfVxuICAgIH1cbiAgfVxufSJdLCJuYW1lcyI6WyJOZXh0UmVzcG9uc2UiLCJHRVQiLCJyZXF1ZXN0IiwiY2xlYW51cEluYWN0aXZlVXNlcnMiLCJzZWFyY2hQYXJhbXMiLCJuZXh0VXJsIiwiZm9ybWF0IiwiZ2V0IiwidGltZVJhbmdlIiwib25saW5lVXNlcnMiLCJnbG9iYWwiLCJNYXAiLCJjdXJyZW50T25saW5lQ291bnQiLCJzaXplIiwianNvbiIsInN1Y2Nlc3MiLCJ0aW1lc3RhbXAiLCJEYXRlIiwidG9JU09TdHJpbmciLCJkZXRhaWxlZFN0YXRzIiwiZ2VuZXJhdGVEZXRhaWxlZFN0YXRzIiwiY3VycmVudCIsImhpc3RvcmljYWwiLCJicmVha2Rvd24iLCJnZW5lcmF0ZVVzZXJCcmVha2Rvd24iLCJlcnJvciIsImNvbnNvbGUiLCJtZXNzYWdlIiwic3RhdHVzIiwibm93IiwiaW5hY3RpdmVUaHJlc2hvbGQiLCJ1c2VySWQiLCJ1c2VyRGF0YSIsImVudHJpZXMiLCJsYXN0QWN0aXZpdHkiLCJnZXRUaW1lIiwiZGVsZXRlIiwic3RhcnRUaW1lIiwiaW50ZXJ2YWwiLCJhbmFseXRpY3NEYXRhIiwidGltZVBvaW50cyIsImN1cnJlbnRUaW1lIiwibmV4dFRpbWUiLCJwZXJpb2REYXRhIiwiZmlsdGVyIiwicmVjb3JkIiwicmVjb3JkVGltZSIsInR5cGUiLCJhdmdDb3VudCIsImxlbmd0aCIsIk1hdGgiLCJyb3VuZCIsInJlZHVjZSIsInN1bSIsIm9ubGluZUNvdW50IiwicHVzaCIsInRpbWUiLCJjb3VudCIsImNvdW50cyIsIm1hcCIsInBvaW50Iiwic3RhdHMiLCJzdW1tYXJ5IiwicGVhayIsIm1heCIsImF2ZXJhZ2UiLCJhIiwiYiIsIm1pbmltdW0iLCJtaW4iLCJjIiwidG90YWwiLCJhdXRoZW50aWNhdGVkIiwiYW5vbnltb3VzIiwibmV3U2Vzc2lvbnMiLCJwbGF0Zm9ybXMiLCJkZXNrdG9wIiwibW9iaWxlIiwidGFibGV0IiwidW5rbm93biIsIm5ld1Nlc3Npb25UaHJlc2hvbGQiLCJzdGFydHNXaXRoIiwibG9naW5UaW1lIiwidXNlckFnZW50IiwidG9Mb3dlckNhc2UiLCJpbmNsdWRlcyJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./app/api/analytics/online-users/route.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next"], () => (__webpack_exec__("(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fanalytics%2Fonline-users%2Froute&page=%2Fapi%2Fanalytics%2Fonline-users%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fanalytics%2Fonline-users%2Froute.ts&appDir=%2FUsers%2FZhuanz%2FDesktop%2FCache%2Fnext-english-app-sm2%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2FZhuanz%2FDesktop%2FCache%2Fnext-english-app-sm2&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!")));
module.exports = __webpack_exports__;

})();