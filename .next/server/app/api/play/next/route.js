"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/play/next/route";
exports.ids = ["app/api/play/next/route"];
exports.modules = {

/***/ "next/dist/compiled/next-server/app-page.runtime.dev.js":
/*!*************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-page.runtime.dev.js" ***!
  \*************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-page.runtime.dev.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "fs":
/*!*********************!*\
  !*** external "fs" ***!
  \*********************/
/***/ ((module) => {

module.exports = require("fs");

/***/ }),

/***/ "path":
/*!***********************!*\
  !*** external "path" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("path");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fplay%2Fnext%2Froute&page=%2Fapi%2Fplay%2Fnext%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fplay%2Fnext%2Froute.ts&appDir=%2FUsers%2FZhuanz%2FDesktop%2FCache%2Fnext-english-app-sm2%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2FZhuanz%2FDesktop%2FCache%2Fnext-english-app-sm2&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!":
/*!*********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fplay%2Fnext%2Froute&page=%2Fapi%2Fplay%2Fnext%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fplay%2Fnext%2Froute.ts&appDir=%2FUsers%2FZhuanz%2FDesktop%2FCache%2Fnext-english-app-sm2%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2FZhuanz%2FDesktop%2FCache%2Fnext-english-app-sm2&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D! ***!
  \*********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   originalPathname: () => (/* binding */ originalPathname),\n/* harmony export */   patchFetch: () => (/* binding */ patchFetch),\n/* harmony export */   requestAsyncStorage: () => (/* binding */ requestAsyncStorage),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   staticGenerationAsyncStorage: () => (/* binding */ staticGenerationAsyncStorage)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/app-route/module.compiled */ \"(rsc)/./node_modules/next/dist/server/future/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(rsc)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/lib/patch-fetch */ \"(rsc)/./node_modules/next/dist/server/lib/patch-fetch.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _Users_Zhuanz_Desktop_Cache_next_english_app_sm2_app_api_play_next_route_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./app/api/play/next/route.ts */ \"(rsc)/./app/api/play/next/route.ts\");\n\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"\"\nconst routeModule = new next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/play/next/route\",\n        pathname: \"/api/play/next\",\n        filename: \"route\",\n        bundlePath: \"app/api/play/next/route\"\n    },\n    resolvedPagePath: \"/Users/Zhuanz/Desktop/Cache/next-english-app-sm2/app/api/play/next/route.ts\",\n    nextConfigOutput,\n    userland: _Users_Zhuanz_Desktop_Cache_next_english_app_sm2_app_api_play_next_route_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { requestAsyncStorage, staticGenerationAsyncStorage, serverHooks } = routeModule;\nconst originalPathname = \"/api/play/next/route\";\nfunction patchFetch() {\n    return (0,next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__.patchFetch)({\n        serverHooks,\n        staticGenerationAsyncStorage\n    });\n}\n\n\n//# sourceMappingURL=app-route.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIuanM/bmFtZT1hcHAlMkZhcGklMkZwbGF5JTJGbmV4dCUyRnJvdXRlJnBhZ2U9JTJGYXBpJTJGcGxheSUyRm5leHQlMkZyb3V0ZSZhcHBQYXRocz0mcGFnZVBhdGg9cHJpdmF0ZS1uZXh0LWFwcC1kaXIlMkZhcGklMkZwbGF5JTJGbmV4dCUyRnJvdXRlLnRzJmFwcERpcj0lMkZVc2VycyUyRlpodWFueiUyRkRlc2t0b3AlMkZDYWNoZSUyRm5leHQtZW5nbGlzaC1hcHAtc20yJTJGYXBwJnBhZ2VFeHRlbnNpb25zPXRzeCZwYWdlRXh0ZW5zaW9ucz10cyZwYWdlRXh0ZW5zaW9ucz1qc3gmcGFnZUV4dGVuc2lvbnM9anMmcm9vdERpcj0lMkZVc2VycyUyRlpodWFueiUyRkRlc2t0b3AlMkZDYWNoZSUyRm5leHQtZW5nbGlzaC1hcHAtc20yJmlzRGV2PXRydWUmdHNjb25maWdQYXRoPXRzY29uZmlnLmpzb24mYmFzZVBhdGg9JmFzc2V0UHJlZml4PSZuZXh0Q29uZmlnT3V0cHV0PSZwcmVmZXJyZWRSZWdpb249Jm1pZGRsZXdhcmVDb25maWc9ZTMwJTNEISIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7QUFBc0c7QUFDdkM7QUFDYztBQUMyQjtBQUN4RztBQUNBO0FBQ0E7QUFDQSx3QkFBd0IsZ0hBQW1CO0FBQzNDO0FBQ0EsY0FBYyx5RUFBUztBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsWUFBWTtBQUNaLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQSxRQUFRLGlFQUFpRTtBQUN6RTtBQUNBO0FBQ0EsV0FBVyw0RUFBVztBQUN0QjtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ3VIOztBQUV2SCIsInNvdXJjZXMiOlsid2VicGFjazovL25leHQtZW5nbGlzaC1hcHAtc20yLz81MWViIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEFwcFJvdXRlUm91dGVNb2R1bGUgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9mdXR1cmUvcm91dGUtbW9kdWxlcy9hcHAtcm91dGUvbW9kdWxlLmNvbXBpbGVkXCI7XG5pbXBvcnQgeyBSb3V0ZUtpbmQgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9mdXR1cmUvcm91dGUta2luZFwiO1xuaW1wb3J0IHsgcGF0Y2hGZXRjaCBhcyBfcGF0Y2hGZXRjaCB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2xpYi9wYXRjaC1mZXRjaFwiO1xuaW1wb3J0ICogYXMgdXNlcmxhbmQgZnJvbSBcIi9Vc2Vycy9aaHVhbnovRGVza3RvcC9DYWNoZS9uZXh0LWVuZ2xpc2gtYXBwLXNtMi9hcHAvYXBpL3BsYXkvbmV4dC9yb3V0ZS50c1wiO1xuLy8gV2UgaW5qZWN0IHRoZSBuZXh0Q29uZmlnT3V0cHV0IGhlcmUgc28gdGhhdCB3ZSBjYW4gdXNlIHRoZW0gaW4gdGhlIHJvdXRlXG4vLyBtb2R1bGUuXG5jb25zdCBuZXh0Q29uZmlnT3V0cHV0ID0gXCJcIlxuY29uc3Qgcm91dGVNb2R1bGUgPSBuZXcgQXBwUm91dGVSb3V0ZU1vZHVsZSh7XG4gICAgZGVmaW5pdGlvbjoge1xuICAgICAgICBraW5kOiBSb3V0ZUtpbmQuQVBQX1JPVVRFLFxuICAgICAgICBwYWdlOiBcIi9hcGkvcGxheS9uZXh0L3JvdXRlXCIsXG4gICAgICAgIHBhdGhuYW1lOiBcIi9hcGkvcGxheS9uZXh0XCIsXG4gICAgICAgIGZpbGVuYW1lOiBcInJvdXRlXCIsXG4gICAgICAgIGJ1bmRsZVBhdGg6IFwiYXBwL2FwaS9wbGF5L25leHQvcm91dGVcIlxuICAgIH0sXG4gICAgcmVzb2x2ZWRQYWdlUGF0aDogXCIvVXNlcnMvWmh1YW56L0Rlc2t0b3AvQ2FjaGUvbmV4dC1lbmdsaXNoLWFwcC1zbTIvYXBwL2FwaS9wbGF5L25leHQvcm91dGUudHNcIixcbiAgICBuZXh0Q29uZmlnT3V0cHV0LFxuICAgIHVzZXJsYW5kXG59KTtcbi8vIFB1bGwgb3V0IHRoZSBleHBvcnRzIHRoYXQgd2UgbmVlZCB0byBleHBvc2UgZnJvbSB0aGUgbW9kdWxlLiBUaGlzIHNob3VsZFxuLy8gYmUgZWxpbWluYXRlZCB3aGVuIHdlJ3ZlIG1vdmVkIHRoZSBvdGhlciByb3V0ZXMgdG8gdGhlIG5ldyBmb3JtYXQuIFRoZXNlXG4vLyBhcmUgdXNlZCB0byBob29rIGludG8gdGhlIHJvdXRlLlxuY29uc3QgeyByZXF1ZXN0QXN5bmNTdG9yYWdlLCBzdGF0aWNHZW5lcmF0aW9uQXN5bmNTdG9yYWdlLCBzZXJ2ZXJIb29rcyB9ID0gcm91dGVNb2R1bGU7XG5jb25zdCBvcmlnaW5hbFBhdGhuYW1lID0gXCIvYXBpL3BsYXkvbmV4dC9yb3V0ZVwiO1xuZnVuY3Rpb24gcGF0Y2hGZXRjaCgpIHtcbiAgICByZXR1cm4gX3BhdGNoRmV0Y2goe1xuICAgICAgICBzZXJ2ZXJIb29rcyxcbiAgICAgICAgc3RhdGljR2VuZXJhdGlvbkFzeW5jU3RvcmFnZVxuICAgIH0pO1xufVxuZXhwb3J0IHsgcm91dGVNb2R1bGUsIHJlcXVlc3RBc3luY1N0b3JhZ2UsIHN0YXRpY0dlbmVyYXRpb25Bc3luY1N0b3JhZ2UsIHNlcnZlckhvb2tzLCBvcmlnaW5hbFBhdGhuYW1lLCBwYXRjaEZldGNoLCAgfTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9YXBwLXJvdXRlLmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fplay%2Fnext%2Froute&page=%2Fapi%2Fplay%2Fnext%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fplay%2Fnext%2Froute.ts&appDir=%2FUsers%2FZhuanz%2FDesktop%2FCache%2Fnext-english-app-sm2%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2FZhuanz%2FDesktop%2FCache%2Fnext-english-app-sm2&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!\n");

/***/ }),

/***/ "(rsc)/./app/api/play/next/route.ts":
/*!************************************!*\
  !*** ./app/api/play/next/route.ts ***!
  \************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   GET: () => (/* binding */ GET)\n/* harmony export */ });\n/* harmony import */ var next_server__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/server */ \"(rsc)/./node_modules/next/dist/api/server.js\");\n/* harmony import */ var _lib_packagesData__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/lib/packagesData */ \"(rsc)/./lib/packagesData.ts\");\n\n\nasync function GET(req) {\n    try {\n        const url = new URL(req.url);\n        const courseIdParam = url.searchParams.get(\"courseId\");\n        const gameType = url.searchParams.get(\"gameType\") || \"word-blitz\";\n        // 如果指定了课程ID，使用该课程\n        if (courseIdParam) {\n            const courseId = parseInt(courseIdParam);\n            const courseData = (0,_lib_packagesData__WEBPACK_IMPORTED_MODULE_1__.loadCourseData)(courseId);\n            if (courseData.length === 0) {\n                return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                    error: \"course not found\"\n                }, {\n                    status: 404\n                });\n            }\n            // 根据游戏类型生成不同的题目\n            if (gameType === \"word-blitz\") {\n                // 百词斩模式 - 返回单个单词和选择项\n                const item = courseData[Math.floor(Math.random() * courseData.length)];\n                const allItems = courseData.concat((0,_lib_packagesData__WEBPACK_IMPORTED_MODULE_1__.loadCourseData)(1)); // 增加更多干扰项\n                const choices = generateWordChoices(item.chinese, allItems);\n                return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                    type: \"word\",\n                    word: {\n                        id: `${courseId}-word`,\n                        term: item.english,\n                        meaning: item.chinese,\n                        soundmark: item.soundmark\n                    },\n                    choices\n                });\n            } else if (gameType === \"sentence-builder\") {\n                // 连词造句模式\n                const item = courseData[Math.floor(Math.random() * courseData.length)];\n                return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                    type: \"item\",\n                    item: {\n                        id: `${courseId}-sentence`,\n                        prompt: item.chinese,\n                        answer: item.english,\n                        tokens: generateSentenceTokens(item.english)\n                    }\n                });\n            } else if (gameType === \"listening\") {\n                // 听写模式\n                const item = courseData[Math.floor(Math.random() * courseData.length)];\n                return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                    type: \"item\",\n                    item: {\n                        id: `${courseId}-listening`,\n                        prompt: item.chinese,\n                        answer: item.english,\n                        audioUrl: null // 可以后续添加音频文件\n                    }\n                });\n            } else {\n                // 中译英模式 (chinese-english)\n                const item = courseData[Math.floor(Math.random() * courseData.length)];\n                return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                    type: \"item\",\n                    item: {\n                        id: `${courseId}-translation`,\n                        prompt: item.chinese,\n                        answer: item.english,\n                        tokens: generateSentenceTokens(item.english)\n                    }\n                });\n            }\n        }\n        // 如果没有指定课程ID，随机选择一个课程\n        const availableCourses = (0,_lib_packagesData__WEBPACK_IMPORTED_MODULE_1__.getAvailableCourseIds)();\n        if (availableCourses.length === 0) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: \"no courses available\"\n            }, {\n                status: 404\n            });\n        }\n        const randomCourseId = availableCourses[Math.floor(Math.random() * availableCourses.length)];\n        const courseData = (0,_lib_packagesData__WEBPACK_IMPORTED_MODULE_1__.loadCourseData)(randomCourseId);\n        const item = courseData[Math.floor(Math.random() * courseData.length)];\n        // 默认返回单词数据用于百词斩\n        const allItems = courseData.concat((0,_lib_packagesData__WEBPACK_IMPORTED_MODULE_1__.loadCourseData)(1));\n        const choices = generateWordChoices(item.chinese, allItems);\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            type: \"word\",\n            word: {\n                id: `${randomCourseId}-word`,\n                term: item.english,\n                meaning: item.chinese,\n                soundmark: item.soundmark\n            },\n            choices\n        });\n    } catch (error) {\n        console.error(\"Play next API error:\", error);\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            error: \"internal server error\"\n        }, {\n            status: 500\n        });\n    }\n}\n// 生成单词选择项\nfunction generateWordChoices(correctAnswer, allItems) {\n    const choices = [\n        correctAnswer\n    ];\n    const used = new Set([\n        correctAnswer.toLowerCase()\n    ]);\n    while(choices.length < 4){\n        const randomItem = allItems[Math.floor(Math.random() * allItems.length)];\n        if (!used.has(randomItem.chinese.toLowerCase()) && randomItem.chinese !== correctAnswer) {\n            choices.push(randomItem.chinese);\n            used.add(randomItem.chinese.toLowerCase());\n        }\n    }\n    // 打乱选项顺序\n    return choices.sort(()=>Math.random() - 0.5);\n}\n// 生成句子构建的token\nfunction generateSentenceTokens(sentence) {\n    const words = sentence.split(\" \");\n    // 添加一些干扰词\n    const distractors = [\n        \"the\",\n        \"a\",\n        \"an\",\n        \"is\",\n        \"are\",\n        \"was\",\n        \"were\",\n        \"have\",\n        \"has\",\n        \"do\",\n        \"does\",\n        \"will\",\n        \"can\",\n        \"could\"\n    ];\n    const additionalDistractors = distractors.filter(()=>Math.random() > 0.7).slice(0, 2);\n    return [\n        ...words,\n        ...additionalDistractors\n    ].sort(()=>Math.random() - 0.5);\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QixNQUFNQyxPQUFPLElBQUlDLElBQUk7UUFBQ0YsY0FBY0csV0FBVztLQUFHO0lBRWxELE1BQU9yQixRQUFRVixNQUFNLEdBQUcsRUFBRztRQUN6QixNQUFNZ0MsYUFBYXhCLFFBQVEsQ0FBQ0gsS0FBS0MsS0FBSyxDQUFDRCxLQUFLRSxNQUFNLEtBQUtDLFNBQVNSLE1BQU0sRUFBRTtRQUN4RSxJQUFJLENBQUM2QixLQUFLSSxHQUFHLENBQUNELFdBQVdwQixPQUFPLENBQUNtQixXQUFXLE9BQU9DLFdBQVdwQixPQUFPLEtBQUtnQixlQUFlO1lBQ3ZGbEIsUUFBUXdCLElBQUksQ0FBQ0YsV0FBV3BCLE9BQU87WUFDL0JpQixLQUFLTSxHQUFHLENBQUNILFdBQVdwQixPQUFPLENBQUNtQixXQUFXO1FBQ3pDO0lBQ0Y7SUFFQSxTQUFTO0lBQ1QsT0FBT3JCLFFBQVEwQixJQUFJLENBQUMsSUFBTS9CLEtBQUtFLE1BQU0sS0FBSztBQUM1QztBQUVBLGVBQWU7QUFDZixTQUFTZ0IsdUJBQXVCYyxRQUFnQjtJQUM5QyxNQUFNQyxRQUFRRCxTQUFTRSxLQUFLLENBQUM7SUFDN0IsVUFBVTtJQUNWLE1BQU1DLGNBQWM7UUFBQztRQUFPO1FBQUs7UUFBTTtRQUFNO1FBQU87UUFBTztRQUFRO1FBQVE7UUFBTztRQUFNO1FBQVE7UUFBUTtRQUFPO0tBQVE7SUFDdkgsTUFBTUMsd0JBQXdCRCxZQUFZRSxNQUFNLENBQUMsSUFBTXJDLEtBQUtFLE1BQU0sS0FBSyxLQUFLb0MsS0FBSyxDQUFDLEdBQUc7SUFFckYsT0FBTztXQUFJTDtXQUFVRztLQUFzQixDQUFDTCxJQUFJLENBQUMsSUFBTS9CLEtBQUtFLE1BQU0sS0FBSztBQUN6RSIsInNvdXJjZXMiOlsid2VicGFjazovL25leHQtZW5nbGlzaC1hcHAtc20yLy4vYXBwL2FwaS9wbGF5L25leHQvcm91dGUudHM/MTUxYSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBOZXh0UmVzcG9uc2UgfSBmcm9tICduZXh0L3NlcnZlcic7XG5pbXBvcnQgeyBnZW5lcmF0ZUdhbWVRdWVzdGlvbnMsIGxvYWRDb3Vyc2VEYXRhLCBnZXRBdmFpbGFibGVDb3Vyc2VJZHMgfSBmcm9tICdAL2xpYi9wYWNrYWdlc0RhdGEnO1xuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gR0VUKHJlcTogUmVxdWVzdCkge1xuICB0cnkge1xuICAgIGNvbnN0IHVybCA9IG5ldyBVUkwocmVxLnVybCk7XG4gICAgY29uc3QgY291cnNlSWRQYXJhbSA9IHVybC5zZWFyY2hQYXJhbXMuZ2V0KCdjb3Vyc2VJZCcpO1xuICAgIGNvbnN0IGdhbWVUeXBlID0gdXJsLnNlYXJjaFBhcmFtcy5nZXQoJ2dhbWVUeXBlJykgfHwgJ3dvcmQtYmxpdHonO1xuICAgIFxuICAgIC8vIOWmguaenOaMh+WumuS6huivvueoi0lE77yM5L2/55So6K+l6K++56iLXG4gICAgaWYgKGNvdXJzZUlkUGFyYW0pIHtcbiAgICAgIGNvbnN0IGNvdXJzZUlkID0gcGFyc2VJbnQoY291cnNlSWRQYXJhbSk7XG4gICAgICBjb25zdCBjb3Vyc2VEYXRhID0gbG9hZENvdXJzZURhdGEoY291cnNlSWQpO1xuICAgICAgXG4gICAgICBpZiAoY291cnNlRGF0YS5sZW5ndGggPT09IDApIHtcbiAgICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHsgZXJyb3I6ICdjb3Vyc2Ugbm90IGZvdW5kJyB9LCB7IHN0YXR1czogNDA0IH0pO1xuICAgICAgfVxuXG4gICAgICAvLyDmoLnmja7muLjmiI/nsbvlnovnlJ/miJDkuI3lkIznmoTpopjnm65cbiAgICAgIGlmIChnYW1lVHlwZSA9PT0gJ3dvcmQtYmxpdHonKSB7XG4gICAgICAgIC8vIOeZvuivjeaWqeaooeW8jyAtIOi/lOWbnuWNleS4quWNleivjeWSjOmAieaLqemhuVxuICAgICAgICBjb25zdCBpdGVtID0gY291cnNlRGF0YVtNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiBjb3Vyc2VEYXRhLmxlbmd0aCldO1xuICAgICAgICBjb25zdCBhbGxJdGVtcyA9IGNvdXJzZURhdGEuY29uY2F0KGxvYWRDb3Vyc2VEYXRhKDEpKTsgLy8g5aKe5Yqg5pu05aSa5bmy5omw6aG5XG4gICAgICAgIGNvbnN0IGNob2ljZXMgPSBnZW5lcmF0ZVdvcmRDaG9pY2VzKGl0ZW0uY2hpbmVzZSwgYWxsSXRlbXMpO1xuICAgICAgICBcbiAgICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHtcbiAgICAgICAgICB0eXBlOiAnd29yZCcsXG4gICAgICAgICAgd29yZDoge1xuICAgICAgICAgICAgaWQ6IGAke2NvdXJzZUlkfS13b3JkYCxcbiAgICAgICAgICAgIHRlcm06IGl0ZW0uZW5nbGlzaCxcbiAgICAgICAgICAgIG1lYW5pbmc6IGl0ZW0uY2hpbmVzZSxcbiAgICAgICAgICAgIHNvdW5kbWFyazogaXRlbS5zb3VuZG1hcmtcbiAgICAgICAgICB9LFxuICAgICAgICAgIGNob2ljZXNcbiAgICAgICAgfSk7XG4gICAgICB9IGVsc2UgaWYgKGdhbWVUeXBlID09PSAnc2VudGVuY2UtYnVpbGRlcicpIHtcbiAgICAgICAgLy8g6L+e6K+N6YCg5Y+l5qih5byPXG4gICAgICAgIGNvbnN0IGl0ZW0gPSBjb3Vyc2VEYXRhW01hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIGNvdXJzZURhdGEubGVuZ3RoKV07XG4gICAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7XG4gICAgICAgICAgdHlwZTogJ2l0ZW0nLFxuICAgICAgICAgIGl0ZW06IHtcbiAgICAgICAgICAgIGlkOiBgJHtjb3Vyc2VJZH0tc2VudGVuY2VgLFxuICAgICAgICAgICAgcHJvbXB0OiBpdGVtLmNoaW5lc2UsXG4gICAgICAgICAgICBhbnN3ZXI6IGl0ZW0uZW5nbGlzaCxcbiAgICAgICAgICAgIHRva2VuczogZ2VuZXJhdGVTZW50ZW5jZVRva2VucyhpdGVtLmVuZ2xpc2gpXG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgIH0gZWxzZSBpZiAoZ2FtZVR5cGUgPT09ICdsaXN0ZW5pbmcnKSB7XG4gICAgICAgIC8vIOWQrOWGmeaooeW8j1xuICAgICAgICBjb25zdCBpdGVtID0gY291cnNlRGF0YVtNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiBjb3Vyc2VEYXRhLmxlbmd0aCldO1xuICAgICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oe1xuICAgICAgICAgIHR5cGU6ICdpdGVtJyxcbiAgICAgICAgICBpdGVtOiB7XG4gICAgICAgICAgICBpZDogYCR7Y291cnNlSWR9LWxpc3RlbmluZ2AsXG4gICAgICAgICAgICBwcm9tcHQ6IGl0ZW0uY2hpbmVzZSxcbiAgICAgICAgICAgIGFuc3dlcjogaXRlbS5lbmdsaXNoLFxuICAgICAgICAgICAgYXVkaW9Vcmw6IG51bGwgLy8g5Y+v5Lul5ZCO57ut5re75Yqg6Z+z6aKR5paH5Lu2XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIOS4reivkeiLseaooeW8jyAoY2hpbmVzZS1lbmdsaXNoKVxuICAgICAgICBjb25zdCBpdGVtID0gY291cnNlRGF0YVtNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiBjb3Vyc2VEYXRhLmxlbmd0aCldO1xuICAgICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oe1xuICAgICAgICAgIHR5cGU6ICdpdGVtJyxcbiAgICAgICAgICBpdGVtOiB7XG4gICAgICAgICAgICBpZDogYCR7Y291cnNlSWR9LXRyYW5zbGF0aW9uYCxcbiAgICAgICAgICAgIHByb21wdDogaXRlbS5jaGluZXNlLFxuICAgICAgICAgICAgYW5zd2VyOiBpdGVtLmVuZ2xpc2gsXG4gICAgICAgICAgICB0b2tlbnM6IGdlbmVyYXRlU2VudGVuY2VUb2tlbnMoaXRlbS5lbmdsaXNoKVxuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfVxuICAgIFxuICAgIC8vIOWmguaenOayoeacieaMh+Wumuivvueoi0lE77yM6ZqP5py66YCJ5oup5LiA5Liq6K++56iLXG4gICAgY29uc3QgYXZhaWxhYmxlQ291cnNlcyA9IGdldEF2YWlsYWJsZUNvdXJzZUlkcygpO1xuICAgIGlmIChhdmFpbGFibGVDb3Vyc2VzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHsgZXJyb3I6ICdubyBjb3Vyc2VzIGF2YWlsYWJsZScgfSwgeyBzdGF0dXM6IDQwNCB9KTtcbiAgICB9XG4gICAgXG4gICAgY29uc3QgcmFuZG9tQ291cnNlSWQgPSBhdmFpbGFibGVDb3Vyc2VzW01hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIGF2YWlsYWJsZUNvdXJzZXMubGVuZ3RoKV07XG4gICAgY29uc3QgY291cnNlRGF0YSA9IGxvYWRDb3Vyc2VEYXRhKHJhbmRvbUNvdXJzZUlkKTtcbiAgICBjb25zdCBpdGVtID0gY291cnNlRGF0YVtNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiBjb3Vyc2VEYXRhLmxlbmd0aCldO1xuICAgIFxuICAgIC8vIOm7mOiupOi/lOWbnuWNleivjeaVsOaNrueUqOS6jueZvuivjeaWqVxuICAgIGNvbnN0IGFsbEl0ZW1zID0gY291cnNlRGF0YS5jb25jYXQobG9hZENvdXJzZURhdGEoMSkpO1xuICAgIGNvbnN0IGNob2ljZXMgPSBnZW5lcmF0ZVdvcmRDaG9pY2VzKGl0ZW0uY2hpbmVzZSwgYWxsSXRlbXMpO1xuICAgIFxuICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7XG4gICAgICB0eXBlOiAnd29yZCcsXG4gICAgICB3b3JkOiB7XG4gICAgICAgIGlkOiBgJHtyYW5kb21Db3Vyc2VJZH0td29yZGAsXG4gICAgICAgIHRlcm06IGl0ZW0uZW5nbGlzaCxcbiAgICAgICAgbWVhbmluZzogaXRlbS5jaGluZXNlLFxuICAgICAgICBzb3VuZG1hcms6IGl0ZW0uc291bmRtYXJrXG4gICAgICB9LFxuICAgICAgY2hvaWNlc1xuICAgIH0pO1xuICAgIFxuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoJ1BsYXkgbmV4dCBBUEkgZXJyb3I6JywgZXJyb3IpO1xuICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7IGVycm9yOiAnaW50ZXJuYWwgc2VydmVyIGVycm9yJyB9LCB7IHN0YXR1czogNTAwIH0pO1xuICB9XG59XG5cbi8vIOeUn+aIkOWNleivjemAieaLqemhuVxuZnVuY3Rpb24gZ2VuZXJhdGVXb3JkQ2hvaWNlcyhjb3JyZWN0QW5zd2VyOiBzdHJpbmcsIGFsbEl0ZW1zOiBhbnlbXSk6IHN0cmluZ1tdIHtcbiAgY29uc3QgY2hvaWNlcyA9IFtjb3JyZWN0QW5zd2VyXTtcbiAgY29uc3QgdXNlZCA9IG5ldyBTZXQoW2NvcnJlY3RBbnN3ZXIudG9Mb3dlckNhc2UoKV0pO1xuICBcbiAgd2hpbGUgKGNob2ljZXMubGVuZ3RoIDwgNCkge1xuICAgIGNvbnN0IHJhbmRvbUl0ZW0gPSBhbGxJdGVtc1tNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiBhbGxJdGVtcy5sZW5ndGgpXTtcbiAgICBpZiAoIXVzZWQuaGFzKHJhbmRvbUl0ZW0uY2hpbmVzZS50b0xvd2VyQ2FzZSgpKSAmJiByYW5kb21JdGVtLmNoaW5lc2UgIT09IGNvcnJlY3RBbnN3ZXIpIHtcbiAgICAgIGNob2ljZXMucHVzaChyYW5kb21JdGVtLmNoaW5lc2UpO1xuICAgICAgdXNlZC5hZGQocmFuZG9tSXRlbS5jaGluZXNlLnRvTG93ZXJDYXNlKCkpO1xuICAgIH1cbiAgfVxuICBcbiAgLy8g5omT5Lmx6YCJ6aG56aG65bqPXG4gIHJldHVybiBjaG9pY2VzLnNvcnQoKCkgPT4gTWF0aC5yYW5kb20oKSAtIDAuNSk7XG59XG5cbi8vIOeUn+aIkOWPpeWtkOaehOW7uueahHRva2VuXG5mdW5jdGlvbiBnZW5lcmF0ZVNlbnRlbmNlVG9rZW5zKHNlbnRlbmNlOiBzdHJpbmcpOiBzdHJpbmdbXSB7XG4gIGNvbnN0IHdvcmRzID0gc2VudGVuY2Uuc3BsaXQoJyAnKTtcbiAgLy8g5re75Yqg5LiA5Lqb5bmy5omw6K+NXG4gIGNvbnN0IGRpc3RyYWN0b3JzID0gWyd0aGUnLCAnYScsICdhbicsICdpcycsICdhcmUnLCAnd2FzJywgJ3dlcmUnLCAnaGF2ZScsICdoYXMnLCAnZG8nLCAnZG9lcycsICd3aWxsJywgJ2NhbicsICdjb3VsZCddO1xuICBjb25zdCBhZGRpdGlvbmFsRGlzdHJhY3RvcnMgPSBkaXN0cmFjdG9ycy5maWx0ZXIoKCkgPT4gTWF0aC5yYW5kb20oKSA+IDAuNykuc2xpY2UoMCwgMik7XG4gIFxuICByZXR1cm4gWy4uLndvcmRzLCAuLi5hZGRpdGlvbmFsRGlzdHJhY3RvcnNdLnNvcnQoKCkgPT4gTWF0aC5yYW5kb20oKSAtIDAuNSk7XG59XG4iXSwibmFtZXMiOlsiTmV4dFJlc3BvbnNlIiwibG9hZENvdXJzZURhdGEiLCJnZXRBdmFpbGFibGVDb3Vyc2VJZHMiLCJHRVQiLCJyZXEiLCJ1cmwiLCJVUkwiLCJjb3Vyc2VJZFBhcmFtIiwic2VhcmNoUGFyYW1zIiwiZ2V0IiwiZ2FtZVR5cGUiLCJjb3Vyc2VJZCIsInBhcnNlSW50IiwiY291cnNlRGF0YSIsImxlbmd0aCIsImpzb24iLCJlcnJvciIsInN0YXR1cyIsIml0ZW0iLCJNYXRoIiwiZmxvb3IiLCJyYW5kb20iLCJhbGxJdGVtcyIsImNvbmNhdCIsImNob2ljZXMiLCJnZW5lcmF0ZVdvcmRDaG9pY2VzIiwiY2hpbmVzZSIsInR5cGUiLCJ3b3JkIiwiaWQiLCJ0ZXJtIiwiZW5nbGlzaCIsIm1lYW5pbmciLCJzb3VuZG1hcmsiLCJwcm9tcHQiLCJhbnN3ZXIiLCJ0b2tlbnMiLCJnZW5lcmF0ZVNlbnRlbmNlVG9rZW5zIiwiYXVkaW9VcmwiLCJhdmFpbGFibGVDb3Vyc2VzIiwicmFuZG9tQ291cnNlSWQiLCJjb25zb2xlIiwiY29ycmVjdEFuc3dlciIsInVzZWQiLCJTZXQiLCJ0b0xvd2VyQ2FzZSIsInJhbmRvbUl0ZW0iLCJoYXMiLCJwdXNoIiwiYWRkIiwic29ydCIsInNlbnRlbmNlIiwid29yZHMiLCJzcGxpdCIsImRpc3RyYWN0b3JzIiwiYWRkaXRpb25hbERpc3RyYWN0b3JzIiwiZmlsdGVyIiwic2xpY2UiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./app/api/play/next/route.ts\n");

/***/ }),

/***/ "(rsc)/./lib/packagesData.ts":
/*!*****************************!*\
  !*** ./lib/packagesData.ts ***!
  \*****************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   generateGameQuestions: () => (/* binding */ generateGameQuestions),\n/* harmony export */   getAllCoursesInfo: () => (/* binding */ getAllCoursesInfo),\n/* harmony export */   getAvailableCourseIds: () => (/* binding */ getAvailableCourseIds),\n/* harmony export */   getCourseInfo: () => (/* binding */ getCourseInfo),\n/* harmony export */   loadCourseData: () => (/* binding */ loadCourseData)\n/* harmony export */ });\n/* harmony import */ var fs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! fs */ \"fs\");\n/* harmony import */ var fs__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(fs__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var path__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! path */ \"path\");\n/* harmony import */ var path__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(path__WEBPACK_IMPORTED_MODULE_1__);\n// lib/packagesData.ts - 处理 packages/data 中的课程数据\n\n\n// 获取所有可用的课程ID\nfunction getAvailableCourseIds() {\n    try {\n        const coursesDir = path__WEBPACK_IMPORTED_MODULE_1___default().join(process.cwd(), \"packages\", \"data\", \"courses\");\n        const files = fs__WEBPACK_IMPORTED_MODULE_0___default().readdirSync(coursesDir);\n        return files.filter((file)=>file.endsWith(\".json\")).map((file)=>parseInt(file.replace(\".json\", \"\"))).filter((id)=>!isNaN(id)).sort((a, b)=>a - b);\n    } catch (error) {\n        console.error(\"Error reading course directory:\", error);\n        return [];\n    }\n}\n// 加载特定课程数据\nfunction loadCourseData(courseId) {\n    try {\n        const filePath = path__WEBPACK_IMPORTED_MODULE_1___default().join(process.cwd(), \"packages\", \"data\", \"courses\", `${courseId.toString().padStart(2, \"0\")}.json`);\n        const fileContent = fs__WEBPACK_IMPORTED_MODULE_0___default().readFileSync(filePath, \"utf8\");\n        return JSON.parse(fileContent);\n    } catch (error) {\n        console.error(`Error loading course ${courseId}:`, error);\n        return [];\n    }\n}\n// 生成不同类型的游戏题目\nfunction generateGameQuestions(courseId, type, count = 10) {\n    const courseData = loadCourseData(courseId);\n    if (courseData.length === 0) return [];\n    const questions = [];\n    const usedIndices = new Set();\n    while(questions.length < count && usedIndices.size < courseData.length){\n        const randomIndex = Math.floor(Math.random() * courseData.length);\n        if (usedIndices.has(randomIndex)) continue;\n        usedIndices.add(randomIndex);\n        const item = courseData[randomIndex];\n        let question;\n        switch(type){\n            case \"translation\":\n                // 中英对照游戏\n                question = {\n                    id: `${courseId}-${randomIndex}-translation`,\n                    type: \"translation\",\n                    prompt: item.chinese,\n                    answer: item.english,\n                    options: generateTranslationOptions(item.english, courseData),\n                    difficulty: determineDifficulty(item),\n                    courseId\n                };\n                break;\n            case \"sentence-builder\":\n                // 连词造句游戏\n                question = {\n                    id: `${courseId}-${randomIndex}-sentence`,\n                    type: \"sentence-builder\",\n                    prompt: item.chinese,\n                    answer: item.english,\n                    tokens: generateSentenceTokens(item.english),\n                    difficulty: determineDifficulty(item),\n                    courseId\n                };\n                break;\n            case \"word-blitz\":\n                // 百词斩游戏\n                question = {\n                    id: `${courseId}-${randomIndex}-word`,\n                    type: \"word-blitz\",\n                    prompt: item.chinese,\n                    answer: item.english,\n                    options: generateWordOptions(item.english, courseData),\n                    difficulty: determineDifficulty(item),\n                    courseId\n                };\n                break;\n        }\n        questions.push(question);\n    }\n    return questions;\n}\n// 生成翻译选项\nfunction generateTranslationOptions(correctAnswer, courseData) {\n    const options = [\n        correctAnswer\n    ];\n    const used = new Set([\n        correctAnswer.toLowerCase()\n    ]);\n    while(options.length < 4){\n        const randomItem = courseData[Math.floor(Math.random() * courseData.length)];\n        if (!used.has(randomItem.english.toLowerCase()) && randomItem.english !== correctAnswer) {\n            options.push(randomItem.english);\n            used.add(randomItem.english.toLowerCase());\n        }\n    }\n    // 打乱选项顺序\n    return options.sort(()=>Math.random() - 0.5);\n}\n// 生成句子构建的token\nfunction generateSentenceTokens(sentence) {\n    const words = sentence.split(\" \");\n    // 添加一些干扰词\n    const distractors = [\n        \"the\",\n        \"a\",\n        \"an\",\n        \"is\",\n        \"are\",\n        \"was\",\n        \"were\",\n        \"have\",\n        \"has\",\n        \"do\",\n        \"does\",\n        \"will\",\n        \"can\",\n        \"could\"\n    ];\n    const additionalDistractors = distractors.filter(()=>Math.random() > 0.7).slice(0, 2);\n    return [\n        ...words,\n        ...additionalDistractors\n    ].sort(()=>Math.random() - 0.5);\n}\n// 生成单词选项\nfunction generateWordOptions(correctAnswer, courseData) {\n    return generateTranslationOptions(correctAnswer, courseData);\n}\n// 确定难度级别\nfunction determineDifficulty(item) {\n    const wordCount = item.english.split(\" \").length;\n    const chineseLength = item.chinese.length;\n    if (wordCount <= 2 && chineseLength <= 3) {\n        return \"beginner\";\n    } else if (wordCount <= 5 && chineseLength <= 8) {\n        return \"intermediate\";\n    } else {\n        return \"advanced\";\n    }\n}\n// 获取课程信息\nfunction getCourseInfo(courseId) {\n    const courseData = loadCourseData(courseId);\n    if (courseData.length === 0) return null;\n    // 根据课程ID生成有意义的标题和描述\n    const courseTitles = {\n        1: {\n            title: \"基础英语入门 - 第一课\",\n            mode: \"初级\"\n        },\n        2: {\n            title: \"日常对话基础\",\n            mode: \"初级\"\n        },\n        3: {\n            title: \"基础语法结构\",\n            mode: \"初级\"\n        },\n        4: {\n            title: \"生活用语表达\",\n            mode: \"初级\"\n        },\n        5: {\n            title: \"时间与日期\",\n            mode: \"初级\"\n        },\n        6: {\n            title: \"家庭与关系\",\n            mode: \"中级\"\n        },\n        7: {\n            title: \"工作与职业\",\n            mode: \"中级\"\n        },\n        8: {\n            title: \"购物与消费\",\n            mode: \"中级\"\n        },\n        9: {\n            title: \"健康与医疗\",\n            mode: \"中级\"\n        },\n        10: {\n            title: \"旅行与交通\",\n            mode: \"中级\"\n        }\n    };\n    const courseInfo = courseTitles[courseId] || {\n        title: `第${courseId}课`,\n        mode: courseId <= 20 ? \"初级\" : courseId <= 40 ? \"中级\" : \"高级\"\n    };\n    return {\n        id: courseId,\n        title: courseInfo.title,\n        mode: courseInfo.mode,\n        description: `包含${courseData.length}个学习项目`,\n        itemCount: courseData.length,\n        difficulty: determineDifficulty(courseData[0]),\n        preview: courseData.slice(0, 3).map((item)=>({\n                chinese: item.chinese,\n                english: item.english\n            }))\n    };\n}\n// 获取所有课程信息\nfunction getAllCoursesInfo() {\n    const courseIds = getAvailableCourseIds();\n    return courseIds.map((id)=>getCourseInfo(id)).filter(Boolean);\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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UUFBSztRQUNoQyxHQUFHO1lBQUVELE9BQU87WUFBU0MsTUFBTTtRQUFLO1FBQ2hDLElBQUk7WUFBRUQsT0FBTztZQUFTQyxNQUFNO1FBQUs7SUFDbkM7SUFFQSxNQUFNQyxhQUFhSCxZQUFZLENBQUNsRCxTQUFTLElBQUk7UUFDM0NtRCxPQUFPLENBQUMsQ0FBQyxFQUFFbkQsU0FBUyxDQUFDLENBQUM7UUFDdEJvRCxNQUFNcEQsWUFBWSxLQUFLLE9BQU9BLFlBQVksS0FBSyxPQUFPO0lBQ3hEO0lBRUEsT0FBTztRQUNMUixJQUFJUTtRQUNKbUQsT0FBT0UsV0FBV0YsS0FBSztRQUN2QkMsTUFBTUMsV0FBV0QsSUFBSTtRQUNyQkUsYUFBYSxDQUFDLEVBQUUsRUFBRTNDLFdBQVdDLE1BQU0sQ0FBQyxLQUFLLENBQUM7UUFDMUMyQyxXQUFXNUMsV0FBV0MsTUFBTTtRQUM1Qm1CLFlBQVlDLG9CQUFvQnJCLFVBQVUsQ0FBQyxFQUFFO1FBQzdDNkMsU0FBUzdDLFdBQVdtQyxLQUFLLENBQUMsR0FBRyxHQUFHekQsR0FBRyxDQUFDa0MsQ0FBQUEsT0FBUztnQkFDM0NHLFNBQVNILEtBQUtHLE9BQU87Z0JBQ3JCRSxTQUFTTCxLQUFLSyxPQUFPO1lBQ3ZCO0lBQ0Y7QUFDRjtBQUVBLFdBQVc7QUFDSixTQUFTNkI7SUFDZCxNQUFNQyxZQUFZL0U7SUFDbEIsT0FBTytFLFVBQVVyRSxHQUFHLENBQUNHLENBQUFBLEtBQU15RCxjQUFjekQsS0FBS04sTUFBTSxDQUFDeUU7QUFDdkQiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9uZXh0LWVuZ2xpc2gtYXBwLXNtMi8uL2xpYi9wYWNrYWdlc0RhdGEudHM/MDIwMyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBsaWIvcGFja2FnZXNEYXRhLnRzIC0g5aSE55CGIHBhY2thZ2VzL2RhdGEg5Lit55qE6K++56iL5pWw5o2uXG5cbmltcG9ydCBmcyBmcm9tICdmcyc7XG5pbXBvcnQgcGF0aCBmcm9tICdwYXRoJztcblxuZXhwb3J0IGludGVyZmFjZSBDb3Vyc2VJdGVtIHtcbiAgY2hpbmVzZTogc3RyaW5nO1xuICBlbmdsaXNoOiBzdHJpbmc7XG4gIHNvdW5kbWFyazogc3RyaW5nO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIEdhbWVRdWVzdGlvbiB7XG4gIGlkOiBzdHJpbmc7XG4gIHR5cGU6ICd0cmFuc2xhdGlvbicgfCAnc2VudGVuY2UtYnVpbGRlcicgfCAnd29yZC1ibGl0eic7XG4gIHByb21wdDogc3RyaW5nO1xuICBhbnN3ZXI6IHN0cmluZztcbiAgb3B0aW9ucz86IHN0cmluZ1tdO1xuICB0b2tlbnM/OiBzdHJpbmdbXTtcbiAgZGlmZmljdWx0eTogJ2JlZ2lubmVyJyB8ICdpbnRlcm1lZGlhdGUnIHwgJ2FkdmFuY2VkJztcbiAgY291cnNlSWQ6IG51bWJlcjtcbn1cblxuLy8g6I635Y+W5omA5pyJ5Y+v55So55qE6K++56iLSURcbmV4cG9ydCBmdW5jdGlvbiBnZXRBdmFpbGFibGVDb3Vyc2VJZHMoKTogbnVtYmVyW10ge1xuICB0cnkge1xuICAgIGNvbnN0IGNvdXJzZXNEaXIgPSBwYXRoLmpvaW4ocHJvY2Vzcy5jd2QoKSwgJ3BhY2thZ2VzJywgJ2RhdGEnLCAnY291cnNlcycpO1xuICAgIGNvbnN0IGZpbGVzID0gZnMucmVhZGRpclN5bmMoY291cnNlc0Rpcik7XG4gICAgcmV0dXJuIGZpbGVzXG4gICAgICAuZmlsdGVyKGZpbGUgPT4gZmlsZS5lbmRzV2l0aCgnLmpzb24nKSlcbiAgICAgIC5tYXAoZmlsZSA9PiBwYXJzZUludChmaWxlLnJlcGxhY2UoJy5qc29uJywgJycpKSlcbiAgICAgIC5maWx0ZXIoaWQgPT4gIWlzTmFOKGlkKSlcbiAgICAgIC5zb3J0KChhLCBiKSA9PiBhIC0gYik7XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcignRXJyb3IgcmVhZGluZyBjb3Vyc2UgZGlyZWN0b3J5OicsIGVycm9yKTtcbiAgICByZXR1cm4gW107XG4gIH1cbn1cblxuLy8g5Yqg6L2954m55a6a6K++56iL5pWw5o2uXG5leHBvcnQgZnVuY3Rpb24gbG9hZENvdXJzZURhdGEoY291cnNlSWQ6IG51bWJlcik6IENvdXJzZUl0ZW1bXSB7XG4gIHRyeSB7XG4gICAgY29uc3QgZmlsZVBhdGggPSBwYXRoLmpvaW4ocHJvY2Vzcy5jd2QoKSwgJ3BhY2thZ2VzJywgJ2RhdGEnLCAnY291cnNlcycsIGAke2NvdXJzZUlkLnRvU3RyaW5nKCkucGFkU3RhcnQoMiwgJzAnKX0uanNvbmApO1xuICAgIGNvbnN0IGZpbGVDb250ZW50ID0gZnMucmVhZEZpbGVTeW5jKGZpbGVQYXRoLCAndXRmOCcpO1xuICAgIHJldHVybiBKU09OLnBhcnNlKGZpbGVDb250ZW50KSBhcyBDb3Vyc2VJdGVtW107XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcihgRXJyb3IgbG9hZGluZyBjb3Vyc2UgJHtjb3Vyc2VJZH06YCwgZXJyb3IpO1xuICAgIHJldHVybiBbXTtcbiAgfVxufVxuXG4vLyDnlJ/miJDkuI3lkIznsbvlnovnmoTmuLjmiI/popjnm65cbmV4cG9ydCBmdW5jdGlvbiBnZW5lcmF0ZUdhbWVRdWVzdGlvbnMoY291cnNlSWQ6IG51bWJlciwgdHlwZTogJ3RyYW5zbGF0aW9uJyB8ICdzZW50ZW5jZS1idWlsZGVyJyB8ICd3b3JkLWJsaXR6JywgY291bnQgPSAxMCk6IEdhbWVRdWVzdGlvbltdIHtcbiAgY29uc3QgY291cnNlRGF0YSA9IGxvYWRDb3Vyc2VEYXRhKGNvdXJzZUlkKTtcbiAgaWYgKGNvdXJzZURhdGEubGVuZ3RoID09PSAwKSByZXR1cm4gW107XG5cbiAgY29uc3QgcXVlc3Rpb25zOiBHYW1lUXVlc3Rpb25bXSA9IFtdO1xuICBjb25zdCB1c2VkSW5kaWNlcyA9IG5ldyBTZXQ8bnVtYmVyPigpO1xuXG4gIHdoaWxlIChxdWVzdGlvbnMubGVuZ3RoIDwgY291bnQgJiYgdXNlZEluZGljZXMuc2l6ZSA8IGNvdXJzZURhdGEubGVuZ3RoKSB7XG4gICAgY29uc3QgcmFuZG9tSW5kZXggPSBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiBjb3Vyc2VEYXRhLmxlbmd0aCk7XG4gICAgaWYgKHVzZWRJbmRpY2VzLmhhcyhyYW5kb21JbmRleCkpIGNvbnRpbnVlO1xuICAgIFxuICAgIHVzZWRJbmRpY2VzLmFkZChyYW5kb21JbmRleCk7XG4gICAgY29uc3QgaXRlbSA9IGNvdXJzZURhdGFbcmFuZG9tSW5kZXhdO1xuXG4gICAgbGV0IHF1ZXN0aW9uOiBHYW1lUXVlc3Rpb247XG5cbiAgICBzd2l0Y2ggKHR5cGUpIHtcbiAgICAgIGNhc2UgJ3RyYW5zbGF0aW9uJzpcbiAgICAgICAgLy8g5Lit6Iux5a+554Wn5ri45oiPXG4gICAgICAgIHF1ZXN0aW9uID0ge1xuICAgICAgICAgIGlkOiBgJHtjb3Vyc2VJZH0tJHtyYW5kb21JbmRleH0tdHJhbnNsYXRpb25gLFxuICAgICAgICAgIHR5cGU6ICd0cmFuc2xhdGlvbicsXG4gICAgICAgICAgcHJvbXB0OiBpdGVtLmNoaW5lc2UsXG4gICAgICAgICAgYW5zd2VyOiBpdGVtLmVuZ2xpc2gsXG4gICAgICAgICAgb3B0aW9uczogZ2VuZXJhdGVUcmFuc2xhdGlvbk9wdGlvbnMoaXRlbS5lbmdsaXNoLCBjb3Vyc2VEYXRhKSxcbiAgICAgICAgICBkaWZmaWN1bHR5OiBkZXRlcm1pbmVEaWZmaWN1bHR5KGl0ZW0pLFxuICAgICAgICAgIGNvdXJzZUlkXG4gICAgICAgIH07XG4gICAgICAgIGJyZWFrO1xuXG4gICAgICBjYXNlICdzZW50ZW5jZS1idWlsZGVyJzpcbiAgICAgICAgLy8g6L+e6K+N6YCg5Y+l5ri45oiPXG4gICAgICAgIHF1ZXN0aW9uID0ge1xuICAgICAgICAgIGlkOiBgJHtjb3Vyc2VJZH0tJHtyYW5kb21JbmRleH0tc2VudGVuY2VgLFxuICAgICAgICAgIHR5cGU6ICdzZW50ZW5jZS1idWlsZGVyJyxcbiAgICAgICAgICBwcm9tcHQ6IGl0ZW0uY2hpbmVzZSxcbiAgICAgICAgICBhbnN3ZXI6IGl0ZW0uZW5nbGlzaCxcbiAgICAgICAgICB0b2tlbnM6IGdlbmVyYXRlU2VudGVuY2VUb2tlbnMoaXRlbS5lbmdsaXNoKSxcbiAgICAgICAgICBkaWZmaWN1bHR5OiBkZXRlcm1pbmVEaWZmaWN1bHR5KGl0ZW0pLFxuICAgICAgICAgIGNvdXJzZUlkXG4gICAgICAgIH07XG4gICAgICAgIGJyZWFrO1xuXG4gICAgICBjYXNlICd3b3JkLWJsaXR6JzpcbiAgICAgICAgLy8g55m+6K+N5pap5ri45oiPXG4gICAgICAgIHF1ZXN0aW9uID0ge1xuICAgICAgICAgIGlkOiBgJHtjb3Vyc2VJZH0tJHtyYW5kb21JbmRleH0td29yZGAsXG4gICAgICAgICAgdHlwZTogJ3dvcmQtYmxpdHonLFxuICAgICAgICAgIHByb21wdDogaXRlbS5jaGluZXNlLFxuICAgICAgICAgIGFuc3dlcjogaXRlbS5lbmdsaXNoLFxuICAgICAgICAgIG9wdGlvbnM6IGdlbmVyYXRlV29yZE9wdGlvbnMoaXRlbS5lbmdsaXNoLCBjb3Vyc2VEYXRhKSxcbiAgICAgICAgICBkaWZmaWN1bHR5OiBkZXRlcm1pbmVEaWZmaWN1bHR5KGl0ZW0pLFxuICAgICAgICAgIGNvdXJzZUlkXG4gICAgICAgIH07XG4gICAgICAgIGJyZWFrO1xuICAgIH1cblxuICAgIHF1ZXN0aW9ucy5wdXNoKHF1ZXN0aW9uKTtcbiAgfVxuXG4gIHJldHVybiBxdWVzdGlvbnM7XG59XG5cbi8vIOeUn+aIkOe/u+ivkemAiemhuVxuZnVuY3Rpb24gZ2VuZXJhdGVUcmFuc2xhdGlvbk9wdGlvbnMoY29ycmVjdEFuc3dlcjogc3RyaW5nLCBjb3Vyc2VEYXRhOiBDb3Vyc2VJdGVtW10pOiBzdHJpbmdbXSB7XG4gIGNvbnN0IG9wdGlvbnMgPSBbY29ycmVjdEFuc3dlcl07XG4gIGNvbnN0IHVzZWQgPSBuZXcgU2V0KFtjb3JyZWN0QW5zd2VyLnRvTG93ZXJDYXNlKCldKTtcblxuICB3aGlsZSAob3B0aW9ucy5sZW5ndGggPCA0KSB7XG4gICAgY29uc3QgcmFuZG9tSXRlbSA9IGNvdXJzZURhdGFbTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogY291cnNlRGF0YS5sZW5ndGgpXTtcbiAgICBpZiAoIXVzZWQuaGFzKHJhbmRvbUl0ZW0uZW5nbGlzaC50b0xvd2VyQ2FzZSgpKSAmJiByYW5kb21JdGVtLmVuZ2xpc2ggIT09IGNvcnJlY3RBbnN3ZXIpIHtcbiAgICAgIG9wdGlvbnMucHVzaChyYW5kb21JdGVtLmVuZ2xpc2gpO1xuICAgICAgdXNlZC5hZGQocmFuZG9tSXRlbS5lbmdsaXNoLnRvTG93ZXJDYXNlKCkpO1xuICAgIH1cbiAgfVxuXG4gIC8vIOaJk+S5semAiemhuemhuuW6j1xuICByZXR1cm4gb3B0aW9ucy5zb3J0KCgpID0+IE1hdGgucmFuZG9tKCkgLSAwLjUpO1xufVxuXG4vLyDnlJ/miJDlj6XlrZDmnoTlu7rnmoR0b2tlblxuZnVuY3Rpb24gZ2VuZXJhdGVTZW50ZW5jZVRva2VucyhzZW50ZW5jZTogc3RyaW5nKTogc3RyaW5nW10ge1xuICBjb25zdCB3b3JkcyA9IHNlbnRlbmNlLnNwbGl0KCcgJyk7XG4gIC8vIOa3u+WKoOS4gOS6m+W5suaJsOivjVxuICBjb25zdCBkaXN0cmFjdG9ycyA9IFsndGhlJywgJ2EnLCAnYW4nLCAnaXMnLCAnYXJlJywgJ3dhcycsICd3ZXJlJywgJ2hhdmUnLCAnaGFzJywgJ2RvJywgJ2RvZXMnLCAnd2lsbCcsICdjYW4nLCAnY291bGQnXTtcbiAgY29uc3QgYWRkaXRpb25hbERpc3RyYWN0b3JzID0gZGlzdHJhY3RvcnMuZmlsdGVyKCgpID0+IE1hdGgucmFuZG9tKCkgPiAwLjcpLnNsaWNlKDAsIDIpO1xuICBcbiAgcmV0dXJuIFsuLi53b3JkcywgLi4uYWRkaXRpb25hbERpc3RyYWN0b3JzXS5zb3J0KCgpID0+IE1hdGgucmFuZG9tKCkgLSAwLjUpO1xufVxuXG4vLyDnlJ/miJDljZXor43pgInpoblcbmZ1bmN0aW9uIGdlbmVyYXRlV29yZE9wdGlvbnMoY29ycmVjdEFuc3dlcjogc3RyaW5nLCBjb3Vyc2VEYXRhOiBDb3Vyc2VJdGVtW10pOiBzdHJpbmdbXSB7XG4gIHJldHVybiBnZW5lcmF0ZVRyYW5zbGF0aW9uT3B0aW9ucyhjb3JyZWN0QW5zd2VyLCBjb3Vyc2VEYXRhKTtcbn1cblxuLy8g56Gu5a6a6Zq+5bqm57qn5YirXG5mdW5jdGlvbiBkZXRlcm1pbmVEaWZmaWN1bHR5KGl0ZW06IENvdXJzZUl0ZW0pOiAnYmVnaW5uZXInIHwgJ2ludGVybWVkaWF0ZScgfCAnYWR2YW5jZWQnIHtcbiAgY29uc3Qgd29yZENvdW50ID0gaXRlbS5lbmdsaXNoLnNwbGl0KCcgJykubGVuZ3RoO1xuICBjb25zdCBjaGluZXNlTGVuZ3RoID0gaXRlbS5jaGluZXNlLmxlbmd0aDtcbiAgXG4gIGlmICh3b3JkQ291bnQgPD0gMiAmJiBjaGluZXNlTGVuZ3RoIDw9IDMpIHtcbiAgICByZXR1cm4gJ2JlZ2lubmVyJztcbiAgfSBlbHNlIGlmICh3b3JkQ291bnQgPD0gNSAmJiBjaGluZXNlTGVuZ3RoIDw9IDgpIHtcbiAgICByZXR1cm4gJ2ludGVybWVkaWF0ZSc7XG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuICdhZHZhbmNlZCc7XG4gIH1cbn1cblxuLy8g6I635Y+W6K++56iL5L+h5oGvXG5leHBvcnQgZnVuY3Rpb24gZ2V0Q291cnNlSW5mbyhjb3Vyc2VJZDogbnVtYmVyKSB7XG4gIGNvbnN0IGNvdXJzZURhdGEgPSBsb2FkQ291cnNlRGF0YShjb3Vyc2VJZCk7XG4gIGlmIChjb3Vyc2VEYXRhLmxlbmd0aCA9PT0gMCkgcmV0dXJuIG51bGw7XG5cbiAgLy8g5qC55o2u6K++56iLSUTnlJ/miJDmnInmhI/kuYnnmoTmoIfpopjlkozmj4/ov7BcbiAgY29uc3QgY291cnNlVGl0bGVzOiBSZWNvcmQ8bnVtYmVyLCB7IHRpdGxlOiBzdHJpbmc7IG1vZGU6IHN0cmluZyB9PiA9IHtcbiAgICAxOiB7IHRpdGxlOiAn5Z+656GA6Iux6K+t5YWl6ZeoIC0g56ys5LiA6K++JywgbW9kZTogJ+WInee6pycgfSxcbiAgICAyOiB7IHRpdGxlOiAn5pel5bi45a+56K+d5Z+656GAJywgbW9kZTogJ+WInee6pycgfSxcbiAgICAzOiB7IHRpdGxlOiAn5Z+656GA6K+t5rOV57uT5p6EJywgbW9kZTogJ+WInee6pycgfSxcbiAgICA0OiB7IHRpdGxlOiAn55Sf5rS755So6K+t6KGo6L6+JywgbW9kZTogJ+WInee6pycgfSxcbiAgICA1OiB7IHRpdGxlOiAn5pe26Ze05LiO5pel5pyfJywgbW9kZTogJ+WInee6pycgfSxcbiAgICA2OiB7IHRpdGxlOiAn5a625bqt5LiO5YWz57O7JywgbW9kZTogJ+S4ree6pycgfSxcbiAgICA3OiB7IHRpdGxlOiAn5bel5L2c5LiO6IGM5LiaJywgbW9kZTogJ+S4ree6pycgfSxcbiAgICA4OiB7IHRpdGxlOiAn6LSt54mp5LiO5raI6LS5JywgbW9kZTogJ+S4ree6pycgfSxcbiAgICA5OiB7IHRpdGxlOiAn5YGl5bq35LiO5Yy755aXJywgbW9kZTogJ+S4ree6pycgfSxcbiAgICAxMDogeyB0aXRsZTogJ+aXheihjOS4juS6pOmAmicsIG1vZGU6ICfkuK3nuqcnIH1cbiAgfTtcblxuICBjb25zdCBjb3Vyc2VJbmZvID0gY291cnNlVGl0bGVzW2NvdXJzZUlkXSB8fCB7IFxuICAgIHRpdGxlOiBg56ysJHtjb3Vyc2VJZH3or75gLCBcbiAgICBtb2RlOiBjb3Vyc2VJZCA8PSAyMCA/ICfliJ3nuqcnIDogY291cnNlSWQgPD0gNDAgPyAn5Lit57qnJyA6ICfpq5jnuqcnIFxuICB9O1xuXG4gIHJldHVybiB7XG4gICAgaWQ6IGNvdXJzZUlkLFxuICAgIHRpdGxlOiBjb3Vyc2VJbmZvLnRpdGxlLFxuICAgIG1vZGU6IGNvdXJzZUluZm8ubW9kZSxcbiAgICBkZXNjcmlwdGlvbjogYOWMheWQqyR7Y291cnNlRGF0YS5sZW5ndGh95Liq5a2m5Lmg6aG555uuYCxcbiAgICBpdGVtQ291bnQ6IGNvdXJzZURhdGEubGVuZ3RoLFxuICAgIGRpZmZpY3VsdHk6IGRldGVybWluZURpZmZpY3VsdHkoY291cnNlRGF0YVswXSksXG4gICAgcHJldmlldzogY291cnNlRGF0YS5zbGljZSgwLCAzKS5tYXAoaXRlbSA9PiAoe1xuICAgICAgY2hpbmVzZTogaXRlbS5jaGluZXNlLFxuICAgICAgZW5nbGlzaDogaXRlbS5lbmdsaXNoXG4gICAgfSkpXG4gIH07XG59XG5cbi8vIOiOt+WPluaJgOacieivvueoi+S/oeaBr1xuZXhwb3J0IGZ1bmN0aW9uIGdldEFsbENvdXJzZXNJbmZvKCkge1xuICBjb25zdCBjb3Vyc2VJZHMgPSBnZXRBdmFpbGFibGVDb3Vyc2VJZHMoKTtcbiAgcmV0dXJuIGNvdXJzZUlkcy5tYXAoaWQgPT4gZ2V0Q291cnNlSW5mbyhpZCkpLmZpbHRlcihCb29sZWFuKTtcbn0iXSwibmFtZXMiOlsiZnMiLCJwYXRoIiwiZ2V0QXZhaWxhYmxlQ291cnNlSWRzIiwiY291cnNlc0RpciIsImpvaW4iLCJwcm9jZXNzIiwiY3dkIiwiZmlsZXMiLCJyZWFkZGlyU3luYyIsImZpbHRlciIsImZpbGUiLCJlbmRzV2l0aCIsIm1hcCIsInBhcnNlSW50IiwicmVwbGFjZSIsImlkIiwiaXNOYU4iLCJzb3J0IiwiYSIsImIiLCJlcnJvciIsImNvbnNvbGUiLCJsb2FkQ291cnNlRGF0YSIsImNvdXJzZUlkIiwiZmlsZVBhdGgiLCJ0b1N0cmluZyIsInBhZFN0YXJ0IiwiZmlsZUNvbnRlbnQiLCJyZWFkRmlsZVN5bmMiLCJKU09OIiwicGFyc2UiLCJnZW5lcmF0ZUdhbWVRdWVzdGlvbnMiLCJ0eXBlIiwiY291bnQiLCJjb3Vyc2VEYXRhIiwibGVuZ3RoIiwicXVlc3Rpb25zIiwidXNlZEluZGljZXMiLCJTZXQiLCJzaXplIiwicmFuZG9tSW5kZXgiLCJNYXRoIiwiZmxvb3IiLCJyYW5kb20iLCJoYXMiLCJhZGQiLCJpdGVtIiwicXVlc3Rpb24iLCJwcm9tcHQiLCJjaGluZXNlIiwiYW5zd2VyIiwiZW5nbGlzaCIsIm9wdGlvbnMiLCJnZW5lcmF0ZVRyYW5zbGF0aW9uT3B0aW9ucyIsImRpZmZpY3VsdHkiLCJkZXRlcm1pbmVEaWZmaWN1bHR5IiwidG9rZW5zIiwiZ2VuZXJhdGVTZW50ZW5jZVRva2VucyIsImdlbmVyYXRlV29yZE9wdGlvbnMiLCJwdXNoIiwiY29ycmVjdEFuc3dlciIsInVzZWQiLCJ0b0xvd2VyQ2FzZSIsInJhbmRvbUl0ZW0iLCJzZW50ZW5jZSIsIndvcmRzIiwic3BsaXQiLCJkaXN0cmFjdG9ycyIsImFkZGl0aW9uYWxEaXN0cmFjdG9ycyIsInNsaWNlIiwid29yZENvdW50IiwiY2hpbmVzZUxlbmd0aCIsImdldENvdXJzZUluZm8iLCJjb3Vyc2VUaXRsZXMiLCJ0aXRsZSIsIm1vZGUiLCJjb3Vyc2VJbmZvIiwiZGVzY3JpcHRpb24iLCJpdGVtQ291bnQiLCJwcmV2aWV3IiwiZ2V0QWxsQ291cnNlc0luZm8iLCJjb3Vyc2VJZHMiLCJCb29sZWFuIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./lib/packagesData.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next"], () => (__webpack_exec__("(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fplay%2Fnext%2Froute&page=%2Fapi%2Fplay%2Fnext%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fplay%2Fnext%2Froute.ts&appDir=%2FUsers%2FZhuanz%2FDesktop%2FCache%2Fnext-english-app-sm2%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2FZhuanz%2FDesktop%2FCache%2Fnext-english-app-sm2&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!")));
module.exports = __webpack_exports__;

})();