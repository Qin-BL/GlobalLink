"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/play/next/route";
exports.ids = ["app/api/play/next/route"];
exports.modules = {

/***/ "@prisma/client":
/*!*********************************!*\
  !*** external "@prisma/client" ***!
  \*********************************/
/***/ ((module) => {

module.exports = require("@prisma/client");

/***/ }),

/***/ "next/dist/compiled/next-server/app-page.runtime.dev.js":
/*!*************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-page.runtime.dev.js" ***!
  \*************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-page.runtime.dev.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fplay%2Fnext%2Froute&page=%2Fapi%2Fplay%2Fnext%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fplay%2Fnext%2Froute.ts&appDir=%2FUsers%2FZhuanz%2FDesktop%2FCache%2Fnext-english-app-sm2%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2FZhuanz%2FDesktop%2FCache%2Fnext-english-app-sm2&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!":
/*!*********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fplay%2Fnext%2Froute&page=%2Fapi%2Fplay%2Fnext%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fplay%2Fnext%2Froute.ts&appDir=%2FUsers%2FZhuanz%2FDesktop%2FCache%2Fnext-english-app-sm2%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2FZhuanz%2FDesktop%2FCache%2Fnext-english-app-sm2&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D! ***!
  \*********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   originalPathname: () => (/* binding */ originalPathname),\n/* harmony export */   patchFetch: () => (/* binding */ patchFetch),\n/* harmony export */   requestAsyncStorage: () => (/* binding */ requestAsyncStorage),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   staticGenerationAsyncStorage: () => (/* binding */ staticGenerationAsyncStorage)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/app-route/module.compiled */ \"(rsc)/./node_modules/next/dist/server/future/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(rsc)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/lib/patch-fetch */ \"(rsc)/./node_modules/next/dist/server/lib/patch-fetch.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _Users_Zhuanz_Desktop_Cache_next_english_app_sm2_app_api_play_next_route_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./app/api/play/next/route.ts */ \"(rsc)/./app/api/play/next/route.ts\");\n\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"\"\nconst routeModule = new next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/play/next/route\",\n        pathname: \"/api/play/next\",\n        filename: \"route\",\n        bundlePath: \"app/api/play/next/route\"\n    },\n    resolvedPagePath: \"/Users/Zhuanz/Desktop/Cache/next-english-app-sm2/app/api/play/next/route.ts\",\n    nextConfigOutput,\n    userland: _Users_Zhuanz_Desktop_Cache_next_english_app_sm2_app_api_play_next_route_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { requestAsyncStorage, staticGenerationAsyncStorage, serverHooks } = routeModule;\nconst originalPathname = \"/api/play/next/route\";\nfunction patchFetch() {\n    return (0,next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__.patchFetch)({\n        serverHooks,\n        staticGenerationAsyncStorage\n    });\n}\n\n\n//# sourceMappingURL=app-route.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIuanM/bmFtZT1hcHAlMkZhcGklMkZwbGF5JTJGbmV4dCUyRnJvdXRlJnBhZ2U9JTJGYXBpJTJGcGxheSUyRm5leHQlMkZyb3V0ZSZhcHBQYXRocz0mcGFnZVBhdGg9cHJpdmF0ZS1uZXh0LWFwcC1kaXIlMkZhcGklMkZwbGF5JTJGbmV4dCUyRnJvdXRlLnRzJmFwcERpcj0lMkZVc2VycyUyRlpodWFueiUyRkRlc2t0b3AlMkZDYWNoZSUyRm5leHQtZW5nbGlzaC1hcHAtc20yJTJGYXBwJnBhZ2VFeHRlbnNpb25zPXRzeCZwYWdlRXh0ZW5zaW9ucz10cyZwYWdlRXh0ZW5zaW9ucz1qc3gmcGFnZUV4dGVuc2lvbnM9anMmcm9vdERpcj0lMkZVc2VycyUyRlpodWFueiUyRkRlc2t0b3AlMkZDYWNoZSUyRm5leHQtZW5nbGlzaC1hcHAtc20yJmlzRGV2PXRydWUmdHNjb25maWdQYXRoPXRzY29uZmlnLmpzb24mYmFzZVBhdGg9JmFzc2V0UHJlZml4PSZuZXh0Q29uZmlnT3V0cHV0PSZwcmVmZXJyZWRSZWdpb249Jm1pZGRsZXdhcmVDb25maWc9ZTMwJTNEISIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7QUFBc0c7QUFDdkM7QUFDYztBQUMyQjtBQUN4RztBQUNBO0FBQ0E7QUFDQSx3QkFBd0IsZ0hBQW1CO0FBQzNDO0FBQ0EsY0FBYyx5RUFBUztBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsWUFBWTtBQUNaLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQSxRQUFRLGlFQUFpRTtBQUN6RTtBQUNBO0FBQ0EsV0FBVyw0RUFBVztBQUN0QjtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ3VIOztBQUV2SCIsInNvdXJjZXMiOlsid2VicGFjazovL25leHQtZW5nbGlzaC1hcHAtc20yLz81MWViIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEFwcFJvdXRlUm91dGVNb2R1bGUgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9mdXR1cmUvcm91dGUtbW9kdWxlcy9hcHAtcm91dGUvbW9kdWxlLmNvbXBpbGVkXCI7XG5pbXBvcnQgeyBSb3V0ZUtpbmQgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9mdXR1cmUvcm91dGUta2luZFwiO1xuaW1wb3J0IHsgcGF0Y2hGZXRjaCBhcyBfcGF0Y2hGZXRjaCB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2xpYi9wYXRjaC1mZXRjaFwiO1xuaW1wb3J0ICogYXMgdXNlcmxhbmQgZnJvbSBcIi9Vc2Vycy9aaHVhbnovRGVza3RvcC9DYWNoZS9uZXh0LWVuZ2xpc2gtYXBwLXNtMi9hcHAvYXBpL3BsYXkvbmV4dC9yb3V0ZS50c1wiO1xuLy8gV2UgaW5qZWN0IHRoZSBuZXh0Q29uZmlnT3V0cHV0IGhlcmUgc28gdGhhdCB3ZSBjYW4gdXNlIHRoZW0gaW4gdGhlIHJvdXRlXG4vLyBtb2R1bGUuXG5jb25zdCBuZXh0Q29uZmlnT3V0cHV0ID0gXCJcIlxuY29uc3Qgcm91dGVNb2R1bGUgPSBuZXcgQXBwUm91dGVSb3V0ZU1vZHVsZSh7XG4gICAgZGVmaW5pdGlvbjoge1xuICAgICAgICBraW5kOiBSb3V0ZUtpbmQuQVBQX1JPVVRFLFxuICAgICAgICBwYWdlOiBcIi9hcGkvcGxheS9uZXh0L3JvdXRlXCIsXG4gICAgICAgIHBhdGhuYW1lOiBcIi9hcGkvcGxheS9uZXh0XCIsXG4gICAgICAgIGZpbGVuYW1lOiBcInJvdXRlXCIsXG4gICAgICAgIGJ1bmRsZVBhdGg6IFwiYXBwL2FwaS9wbGF5L25leHQvcm91dGVcIlxuICAgIH0sXG4gICAgcmVzb2x2ZWRQYWdlUGF0aDogXCIvVXNlcnMvWmh1YW56L0Rlc2t0b3AvQ2FjaGUvbmV4dC1lbmdsaXNoLWFwcC1zbTIvYXBwL2FwaS9wbGF5L25leHQvcm91dGUudHNcIixcbiAgICBuZXh0Q29uZmlnT3V0cHV0LFxuICAgIHVzZXJsYW5kXG59KTtcbi8vIFB1bGwgb3V0IHRoZSBleHBvcnRzIHRoYXQgd2UgbmVlZCB0byBleHBvc2UgZnJvbSB0aGUgbW9kdWxlLiBUaGlzIHNob3VsZFxuLy8gYmUgZWxpbWluYXRlZCB3aGVuIHdlJ3ZlIG1vdmVkIHRoZSBvdGhlciByb3V0ZXMgdG8gdGhlIG5ldyBmb3JtYXQuIFRoZXNlXG4vLyBhcmUgdXNlZCB0byBob29rIGludG8gdGhlIHJvdXRlLlxuY29uc3QgeyByZXF1ZXN0QXN5bmNTdG9yYWdlLCBzdGF0aWNHZW5lcmF0aW9uQXN5bmNTdG9yYWdlLCBzZXJ2ZXJIb29rcyB9ID0gcm91dGVNb2R1bGU7XG5jb25zdCBvcmlnaW5hbFBhdGhuYW1lID0gXCIvYXBpL3BsYXkvbmV4dC9yb3V0ZVwiO1xuZnVuY3Rpb24gcGF0Y2hGZXRjaCgpIHtcbiAgICByZXR1cm4gX3BhdGNoRmV0Y2goe1xuICAgICAgICBzZXJ2ZXJIb29rcyxcbiAgICAgICAgc3RhdGljR2VuZXJhdGlvbkFzeW5jU3RvcmFnZVxuICAgIH0pO1xufVxuZXhwb3J0IHsgcm91dGVNb2R1bGUsIHJlcXVlc3RBc3luY1N0b3JhZ2UsIHN0YXRpY0dlbmVyYXRpb25Bc3luY1N0b3JhZ2UsIHNlcnZlckhvb2tzLCBvcmlnaW5hbFBhdGhuYW1lLCBwYXRjaEZldGNoLCAgfTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9YXBwLXJvdXRlLmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fplay%2Fnext%2Froute&page=%2Fapi%2Fplay%2Fnext%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fplay%2Fnext%2Froute.ts&appDir=%2FUsers%2FZhuanz%2FDesktop%2FCache%2Fnext-english-app-sm2%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2FZhuanz%2FDesktop%2FCache%2Fnext-english-app-sm2&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!\n");

/***/ }),

/***/ "(rsc)/./app/api/play/next/route.ts":
/*!************************************!*\
  !*** ./app/api/play/next/route.ts ***!
  \************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   GET: () => (/* binding */ GET)\n/* harmony export */ });\n/* harmony import */ var next_server__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/server */ \"(rsc)/./node_modules/next/dist/api/server.js\");\n/* harmony import */ var _lib_db__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/lib/db */ \"(rsc)/./lib/db.ts\");\n\n\nasync function GET(req) {\n    const url = new URL(req.url);\n    const courseId = url.searchParams.get(\"courseId\");\n    const anonId = url.searchParams.get(\"userId\");\n    let user = null;\n    if (anonId) {\n        user = await _lib_db__WEBPACK_IMPORTED_MODULE_1__.prisma.user.findUnique({\n            where: {\n                anonId\n            }\n        });\n        if (!user) {\n            try {\n                user = await _lib_db__WEBPACK_IMPORTED_MODULE_1__.prisma.user.create({\n                    data: {\n                        anonId\n                    }\n                });\n            } catch (error) {\n                // Handle unique constraint violation - user might have been created by another request\n                user = await _lib_db__WEBPACK_IMPORTED_MODULE_1__.prisma.user.findUnique({\n                    where: {\n                        anonId\n                    }\n                });\n                if (!user) {\n                    throw error; // Re-throw if it's a different error\n                }\n            }\n        }\n    }\n    if (courseId) {\n        const course = await _lib_db__WEBPACK_IMPORTED_MODULE_1__.prisma.course.findUnique({\n            where: {\n                id: Number(courseId)\n            },\n            include: {\n                units: {\n                    include: {\n                        items: true\n                    }\n                }\n            }\n        });\n        if (!course) return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            error: \"course not found\"\n        }, {\n            status: 404\n        });\n        if (course.mode === \"word-blitz\") {\n            if (user) {\n                const due = await _lib_db__WEBPACK_IMPORTED_MODULE_1__.prisma.progress.findMany({\n                    where: {\n                        userId: user.id,\n                        wordId: {\n                            not: null\n                        },\n                        nextDue: {\n                            lte: new Date()\n                        }\n                    },\n                    include: {\n                        word: true\n                    }\n                });\n                if (due.length) {\n                    const progress = due[Math.floor(Math.random() * due.length)];\n                    const word = progress.word;\n                    if (word) {\n                        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                            type: \"word\",\n                            word,\n                            choices: await buildChoices(word.id)\n                        });\n                    }\n                }\n            }\n            const count = await _lib_db__WEBPACK_IMPORTED_MODULE_1__.prisma.word.count();\n            if (count === 0) return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: \"no words\"\n            }, {\n                status: 404\n            });\n            const skip = Math.floor(Math.random() * count);\n            const word = await _lib_db__WEBPACK_IMPORTED_MODULE_1__.prisma.word.findFirst({\n                skip\n            });\n            if (!word) return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: \"no word found\"\n            }, {\n                status: 404\n            });\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                type: \"word\",\n                word,\n                choices: await buildChoices(word.id)\n            });\n        } else {\n            const unitIds = course.units.map((u)=>u.id);\n            if (user) {\n                const due = await _lib_db__WEBPACK_IMPORTED_MODULE_1__.prisma.progress.findMany({\n                    where: {\n                        userId: user.id,\n                        itemId: {\n                            not: null\n                        },\n                        nextDue: {\n                            lte: new Date()\n                        }\n                    },\n                    include: {\n                        item: true\n                    }\n                });\n                if (due.length) {\n                    const it = due[Math.floor(Math.random() * due.length)].item;\n                    return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                        type: \"item\",\n                        item: it\n                    });\n                }\n            }\n            const items = await _lib_db__WEBPACK_IMPORTED_MODULE_1__.prisma.item.findMany({\n                where: {\n                    unitId: {\n                        in: unitIds\n                    }\n                }\n            });\n            if (!items.length) return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: \"no items\"\n            }, {\n                status: 404\n            });\n            const item = items[Math.floor(Math.random() * items.length)];\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                type: \"item\",\n                item\n            });\n        }\n    }\n    const count = await _lib_db__WEBPACK_IMPORTED_MODULE_1__.prisma.word.count();\n    if (count === 0) return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n        error: \"no words\"\n    }, {\n        status: 404\n    });\n    const skip = Math.floor(Math.random() * count);\n    const word = await _lib_db__WEBPACK_IMPORTED_MODULE_1__.prisma.word.findFirst({\n        skip\n    });\n    if (!word) return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n        error: \"no word found\"\n    }, {\n        status: 404\n    });\n    return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n        type: \"word\",\n        word,\n        choices: await buildChoices(word.id)\n    });\n    async function buildChoices(wordId) {\n        const others = await _lib_db__WEBPACK_IMPORTED_MODULE_1__.prisma.word.findMany({\n            take: 50\n        });\n        const pool = others.filter((w)=>w.id !== wordId).map((w)=>w.meaning);\n        const set = new Set();\n        while(set.size < 3 && pool.length){\n            const idx = Math.floor(Math.random() * pool.length);\n            set.add(pool[idx]);\n            pool.splice(idx, 1);\n        }\n        const choices = [\n            (await _lib_db__WEBPACK_IMPORTED_MODULE_1__.prisma.word.findUnique({\n                where: {\n                    id: wordId\n                }\n            }))?.meaning || \"\",\n            ...Array.from(set)\n        ];\n        for(let i = choices.length - 1; i > 0; i--){\n            const j = Math.floor(Math.random() * (i + 1));\n            [choices[i], choices[j]] = [\n                choices[j],\n                choices[i]\n            ];\n        }\n        return choices;\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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RHdCLElBQUlJLEdBQUcsQ0FBQ1IsSUFBSSxDQUFDTyxJQUFJO1lBQUdQLEtBQUtTLE1BQU0sQ0FBQ0YsS0FBSTtRQUN0QztRQUNBLE1BQU10QixVQUFVO1lBQUcsT0FBTXZDLDJDQUFNQSxDQUFDaUMsSUFBSSxDQUFDdkIsVUFBVSxDQUFDO2dCQUFFQyxPQUFPO29CQUFFSyxJQUFJWTtnQkFBTztZQUFFLEVBQUMsR0FBSTZCLFdBQVc7ZUFBT08sTUFBTUMsSUFBSSxDQUFDUDtTQUFNO1FBQ2hILElBQUssSUFBSVEsSUFBSTNCLFFBQVFMLE1BQU0sR0FBQyxHQUFFZ0MsSUFBRSxHQUFFQSxJQUFJO1lBQUUsTUFBTUMsSUFBRWhDLEtBQUtDLEtBQUssQ0FBQ0QsS0FBS0UsTUFBTSxLQUFJNkIsQ0FBQUEsSUFBRTtZQUFLLENBQUMzQixPQUFPLENBQUMyQixFQUFFLEVBQUMzQixPQUFPLENBQUM0QixFQUFFLENBQUMsR0FBQztnQkFBQzVCLE9BQU8sQ0FBQzRCLEVBQUU7Z0JBQUM1QixPQUFPLENBQUMyQixFQUFFO2FBQUM7UUFBRTtRQUNsSSxPQUFPM0I7SUFDVDtBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vbmV4dC1lbmdsaXNoLWFwcC1zbTIvLi9hcHAvYXBpL3BsYXkvbmV4dC9yb3V0ZS50cz8xNTFhIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IE5leHRSZXNwb25zZSB9IGZyb20gJ25leHQvc2VydmVyJztcbmltcG9ydCB7IHByaXNtYSB9IGZyb20gJ0AvbGliL2RiJztcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBHRVQocmVxOiBSZXF1ZXN0KSB7XG4gIGNvbnN0IHVybCA9IG5ldyBVUkwocmVxLnVybCk7XG4gIGNvbnN0IGNvdXJzZUlkID0gdXJsLnNlYXJjaFBhcmFtcy5nZXQoJ2NvdXJzZUlkJyk7XG4gIGNvbnN0IGFub25JZCA9IHVybC5zZWFyY2hQYXJhbXMuZ2V0KCd1c2VySWQnKTtcbiAgbGV0IHVzZXI6IGFueSA9IG51bGw7XG4gIGlmIChhbm9uSWQpIHtcbiAgICB1c2VyID0gYXdhaXQgcHJpc21hLnVzZXIuZmluZFVuaXF1ZSh7IHdoZXJlOiB7IGFub25JZCB9IH0pO1xuICAgIGlmICghdXNlcikge1xuICAgICAgdHJ5IHtcbiAgICAgICAgdXNlciA9IGF3YWl0IHByaXNtYS51c2VyLmNyZWF0ZSh7IGRhdGE6IHsgYW5vbklkIH0gfSk7XG4gICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAvLyBIYW5kbGUgdW5pcXVlIGNvbnN0cmFpbnQgdmlvbGF0aW9uIC0gdXNlciBtaWdodCBoYXZlIGJlZW4gY3JlYXRlZCBieSBhbm90aGVyIHJlcXVlc3RcbiAgICAgICAgdXNlciA9IGF3YWl0IHByaXNtYS51c2VyLmZpbmRVbmlxdWUoeyB3aGVyZTogeyBhbm9uSWQgfSB9KTtcbiAgICAgICAgaWYgKCF1c2VyKSB7XG4gICAgICAgICAgdGhyb3cgZXJyb3I7IC8vIFJlLXRocm93IGlmIGl0J3MgYSBkaWZmZXJlbnQgZXJyb3JcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfVxuICBpZiAoY291cnNlSWQpIHtcbiAgICBjb25zdCBjb3Vyc2UgPSBhd2FpdCBwcmlzbWEuY291cnNlLmZpbmRVbmlxdWUoeyB3aGVyZTogeyBpZDogTnVtYmVyKGNvdXJzZUlkKSB9LCBpbmNsdWRlOiB7IHVuaXRzOiB7IGluY2x1ZGU6IHsgaXRlbXM6IHRydWUgfSB9IH0gfSk7XG4gICAgaWYgKCFjb3Vyc2UpIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7IGVycm9yOiAnY291cnNlIG5vdCBmb3VuZCcgfSwgeyBzdGF0dXM6IDQwNCB9KTtcbiAgICBpZiAoY291cnNlLm1vZGUgPT09ICd3b3JkLWJsaXR6Jykge1xuICAgICAgaWYgKHVzZXIpIHtcbiAgICAgICAgY29uc3QgZHVlID0gYXdhaXQgcHJpc21hLnByb2dyZXNzLmZpbmRNYW55KHsgd2hlcmU6IHsgdXNlcklkOiB1c2VyLmlkLCB3b3JkSWQ6IHsgbm90OiBudWxsIH0sIG5leHREdWU6IHsgbHRlOiBuZXcgRGF0ZSgpIH0gfSwgaW5jbHVkZTogeyB3b3JkOiB0cnVlIH0gfSk7XG4gICAgICAgIGlmIChkdWUubGVuZ3RoKSB7XG4gICAgICAgICAgY29uc3QgcHJvZ3Jlc3MgPSBkdWVbTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpKmR1ZS5sZW5ndGgpXTtcbiAgICAgICAgICBjb25zdCB3b3JkID0gcHJvZ3Jlc3Mud29yZDtcbiAgICAgICAgICBpZiAod29yZCkge1xuICAgICAgICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHsgdHlwZTogJ3dvcmQnLCB3b3JkLCBjaG9pY2VzOiBhd2FpdCBidWlsZENob2ljZXMod29yZC5pZCkgfSk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgICBjb25zdCBjb3VudCA9IGF3YWl0IHByaXNtYS53b3JkLmNvdW50KCk7XG4gICAgICBpZiAoY291bnQgPT09IDApIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7IGVycm9yOiAnbm8gd29yZHMnIH0sIHsgc3RhdHVzOiA0MDQgfSk7XG4gICAgICBjb25zdCBza2lwID0gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpKmNvdW50KTtcbiAgICAgIGNvbnN0IHdvcmQgPSBhd2FpdCBwcmlzbWEud29yZC5maW5kRmlyc3QoeyBza2lwIH0pO1xuICAgICAgaWYgKCF3b3JkKSByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oeyBlcnJvcjogJ25vIHdvcmQgZm91bmQnIH0sIHsgc3RhdHVzOiA0MDQgfSk7XG4gICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oeyB0eXBlOiAnd29yZCcsIHdvcmQsIGNob2ljZXM6IGF3YWl0IGJ1aWxkQ2hvaWNlcyh3b3JkLmlkKSB9KTtcbiAgICB9IGVsc2Uge1xuICAgICAgY29uc3QgdW5pdElkcyA9IGNvdXJzZS51bml0cy5tYXAodT0+dS5pZCk7XG4gICAgICBpZiAodXNlcikge1xuICAgICAgICBjb25zdCBkdWUgPSBhd2FpdCBwcmlzbWEucHJvZ3Jlc3MuZmluZE1hbnkoeyB3aGVyZTogeyB1c2VySWQ6IHVzZXIuaWQsIGl0ZW1JZDogeyBub3Q6IG51bGwgfSwgbmV4dER1ZTogeyBsdGU6IG5ldyBEYXRlKCkgfSB9LCBpbmNsdWRlOiB7IGl0ZW06IHRydWUgfSB9KTtcbiAgICAgICAgaWYgKGR1ZS5sZW5ndGgpIHtcbiAgICAgICAgICBjb25zdCBpdCA9IGR1ZVtNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkqZHVlLmxlbmd0aCldLml0ZW07XG4gICAgICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHsgdHlwZTogJ2l0ZW0nLCBpdGVtOiBpdCB9KTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgY29uc3QgaXRlbXMgPSBhd2FpdCBwcmlzbWEuaXRlbS5maW5kTWFueSh7IHdoZXJlOiB7IHVuaXRJZDogeyBpbjogdW5pdElkcyB9IH0gfSk7XG4gICAgICBpZiAoIWl0ZW1zLmxlbmd0aCkgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHsgZXJyb3I6ICdubyBpdGVtcycgfSwgeyBzdGF0dXM6IDQwNCB9KTtcbiAgICAgIGNvbnN0IGl0ZW0gPSBpdGVtc1tNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkqaXRlbXMubGVuZ3RoKV07XG4gICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oeyB0eXBlOiAnaXRlbScsIGl0ZW0gfSk7XG4gICAgfVxuICB9XG4gIGNvbnN0IGNvdW50ID0gYXdhaXQgcHJpc21hLndvcmQuY291bnQoKTtcbiAgaWYgKGNvdW50ID09PSAwKSByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oeyBlcnJvcjogJ25vIHdvcmRzJyB9LCB7IHN0YXR1czogNDA0IH0pO1xuICBjb25zdCBza2lwID0gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpKmNvdW50KTtcbiAgY29uc3Qgd29yZCA9IGF3YWl0IHByaXNtYS53b3JkLmZpbmRGaXJzdCh7IHNraXAgfSk7XG4gIGlmICghd29yZCkgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHsgZXJyb3I6ICdubyB3b3JkIGZvdW5kJyB9LCB7IHN0YXR1czogNDA0IH0pO1xuICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oeyB0eXBlOiAnd29yZCcsIHdvcmQsIGNob2ljZXM6IGF3YWl0IGJ1aWxkQ2hvaWNlcyh3b3JkLmlkKSB9KTtcbiAgYXN5bmMgZnVuY3Rpb24gYnVpbGRDaG9pY2VzKHdvcmRJZDpudW1iZXIpIHtcbiAgICBjb25zdCBvdGhlcnMgPSBhd2FpdCBwcmlzbWEud29yZC5maW5kTWFueSh7IHRha2U6IDUwIH0pO1xuICAgIGNvbnN0IHBvb2wgPSBvdGhlcnMuZmlsdGVyKHc9PncuaWQhPT13b3JkSWQpLm1hcCh3PT53Lm1lYW5pbmcpO1xuICAgIGNvbnN0IHNldCA9IG5ldyBTZXQ8c3RyaW5nPigpO1xuICAgIHdoaWxlIChzZXQuc2l6ZSA8IDMgJiYgcG9vbC5sZW5ndGgpIHtcbiAgICAgIGNvbnN0IGlkeCA9IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSpwb29sLmxlbmd0aCk7XG4gICAgICBzZXQuYWRkKHBvb2xbaWR4XSk7IHBvb2wuc3BsaWNlKGlkeCwxKTtcbiAgICB9XG4gICAgY29uc3QgY2hvaWNlcyA9IFsgKGF3YWl0IHByaXNtYS53b3JkLmZpbmRVbmlxdWUoeyB3aGVyZTogeyBpZDogd29yZElkIH0gfSkpPy5tZWFuaW5nIHx8ICcnLCAuLi5BcnJheS5mcm9tKHNldCkgXTtcbiAgICBmb3IgKGxldCBpID0gY2hvaWNlcy5sZW5ndGgtMTtpPjA7aS0tKXsgY29uc3Qgaj1NYXRoLmZsb29yKE1hdGgucmFuZG9tKCkqKGkrMSkpOyBbY2hvaWNlc1tpXSxjaG9pY2VzW2pdXT1bY2hvaWNlc1tqXSxjaG9pY2VzW2ldXTsgfVxuICAgIHJldHVybiBjaG9pY2VzO1xuICB9XG59XG4iXSwibmFtZXMiOlsiTmV4dFJlc3BvbnNlIiwicHJpc21hIiwiR0VUIiwicmVxIiwidXJsIiwiVVJMIiwiY291cnNlSWQiLCJzZWFyY2hQYXJhbXMiLCJnZXQiLCJhbm9uSWQiLCJ1c2VyIiwiZmluZFVuaXF1ZSIsIndoZXJlIiwiY3JlYXRlIiwiZGF0YSIsImVycm9yIiwiY291cnNlIiwiaWQiLCJOdW1iZXIiLCJpbmNsdWRlIiwidW5pdHMiLCJpdGVtcyIsImpzb24iLCJzdGF0dXMiLCJtb2RlIiwiZHVlIiwicHJvZ3Jlc3MiLCJmaW5kTWFueSIsInVzZXJJZCIsIndvcmRJZCIsIm5vdCIsIm5leHREdWUiLCJsdGUiLCJEYXRlIiwid29yZCIsImxlbmd0aCIsIk1hdGgiLCJmbG9vciIsInJhbmRvbSIsInR5cGUiLCJjaG9pY2VzIiwiYnVpbGRDaG9pY2VzIiwiY291bnQiLCJza2lwIiwiZmluZEZpcnN0IiwidW5pdElkcyIsIm1hcCIsInUiLCJpdGVtSWQiLCJpdGVtIiwiaXQiLCJ1bml0SWQiLCJpbiIsIm90aGVycyIsInRha2UiLCJwb29sIiwiZmlsdGVyIiwidyIsIm1lYW5pbmciLCJzZXQiLCJTZXQiLCJzaXplIiwiaWR4IiwiYWRkIiwic3BsaWNlIiwiQXJyYXkiLCJmcm9tIiwiaSIsImoiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./app/api/play/next/route.ts\n");

/***/ }),

/***/ "(rsc)/./lib/db.ts":
/*!*******************!*\
  !*** ./lib/db.ts ***!
  \*******************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   prisma: () => (/* binding */ prisma)\n/* harmony export */ });\n/* harmony import */ var _prisma_client__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @prisma/client */ \"@prisma/client\");\n/* harmony import */ var _prisma_client__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_prisma_client__WEBPACK_IMPORTED_MODULE_0__);\n\nconst prisma = global.prismaGlobal ?? new _prisma_client__WEBPACK_IMPORTED_MODULE_0__.PrismaClient();\nif (true) global.prismaGlobal = prisma;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9saWIvZGIudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQThDO0FBRXZDLE1BQU1DLFNBQVNDLE9BQU9DLFlBQVksSUFBSSxJQUFJSCx3REFBWUEsR0FBRztBQUNoRSxJQUFJSSxJQUF5QixFQUFjRixPQUFPQyxZQUFZLEdBQUdGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vbmV4dC1lbmdsaXNoLWFwcC1zbTIvLi9saWIvZGIudHM/MWRmMCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBQcmlzbWFDbGllbnQgfSBmcm9tICdAcHJpc21hL2NsaWVudCc7XG5kZWNsYXJlIGdsb2JhbCB7IHZhciBwcmlzbWFHbG9iYWw6IFByaXNtYUNsaWVudCB8IHVuZGVmaW5lZDsgfVxuZXhwb3J0IGNvbnN0IHByaXNtYSA9IGdsb2JhbC5wcmlzbWFHbG9iYWwgPz8gbmV3IFByaXNtYUNsaWVudCgpO1xuaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIGdsb2JhbC5wcmlzbWFHbG9iYWwgPSBwcmlzbWE7XG4iXSwibmFtZXMiOlsiUHJpc21hQ2xpZW50IiwicHJpc21hIiwiZ2xvYmFsIiwicHJpc21hR2xvYmFsIiwicHJvY2VzcyJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./lib/db.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next"], () => (__webpack_exec__("(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fplay%2Fnext%2Froute&page=%2Fapi%2Fplay%2Fnext%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fplay%2Fnext%2Froute.ts&appDir=%2FUsers%2FZhuanz%2FDesktop%2FCache%2Fnext-english-app-sm2%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2FZhuanz%2FDesktop%2FCache%2Fnext-english-app-sm2&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!")));
module.exports = __webpack_exports__;

})();